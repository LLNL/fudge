
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>fudge.legacy.endl.endlmisc &#8212; Fudge and GNDS 4.2.3 beta documentation</title>
    <link rel="stylesheet" href="../../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '4.2.3 beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../../_static/gnd-20121206-favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">Fudge and GNDS 4.2.3 beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../endl.html" accesskey="U">fudge.legacy.endl</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for fudge.legacy.endl.endlmisc</h1><div class="highlight"><pre>
<span></span># &lt;&lt;BEGIN-copyright&gt;&gt;
# &lt;&lt;END-copyright&gt;&gt;

&quot;&quot;&quot;
This module contains miscellaneous functions related to ENDL.
&quot;&quot;&quot;

import os
import sys
import copy
import string
import math
import re
from fudge import fudgeDefaults

<div class="viewcode-block" id="copyEndlHeader"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.copyEndlHeader">[docs]</a>def copyEndlHeader( Desc, Src ) :
    &quot;&quot;&quot;This needs to be documented.&quot;&quot;&quot;

    if( not hasattr( Src, &quot;h&quot; ) ) :
        raise Exception( &quot;\nError from copyEndlHeader: Source does not have a header&quot; )
    Desc.h = copy.deepcopy( Src.h )
    if( Desc.I &gt;= 0 ) :
        Desc.h[1] = &quot;%s%3d%s&quot; % ( Desc.h[1][:2], Desc.I, Desc.h[1][5:] )
    Desc.C = Src.C
    Desc.Q = Src.Q
    Desc.S = Src.S
    Desc.X1 = Src.X1
    Desc.X2 = Src.X2
    Desc.X3 = Src.X3
    Desc.X4 = Src.X4
    Desc.yo = Src.yo</div>

<div class="viewcode-block" id="incidentParticleTags"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.incidentParticleTags">[docs]</a>def incidentParticleTags( yi ) :
    &quot;&quot;&quot;Returns a list of [ iYi, strYi, symbol, name ] for projectile yi where yi 
    can be any of iYi, strYi, label or name. iYi is the projectile integer id, strYi
    is a string of the form &quot;yi##&quot; where ## is iYi converted to a two digit string,
    and the last two (symbol and name) are the projectiles symbol and name. For
    example, incidentParticleTags( &quot;yi02&quot; ) would return [ 2, &quot;yi02&quot;, &quot;p&quot;, &quot;proton&quot; ].&quot;&quot;&quot;

    yis = [ [ 0, &quot;yi00&quot;, &quot;u&quot;,  &quot;unknown&quot;,  &quot;unknown&quot;, &quot;unknown&quot;  ], [ 1, &quot;yi01&quot;, &quot;n&quot;,   &quot;neutron&quot;,  &quot;n&quot;,   &quot;n&quot;      ],
            [ 2, &quot;yi02&quot;, &quot;p&quot;,  &quot;proton&quot;,   &quot;H1&quot;,     &quot;H1&quot;      ], [ 3, &quot;yi03&quot;, &quot;d&quot;,   &quot;deuteron&quot;, &quot;H2&quot;,   &quot;H2&quot;      ],
            [ 4, &quot;yi04&quot;, &quot;t&quot;,  &quot;triton&quot;,   &quot;H3&quot;,     &quot;H3&quot;      ], [ 5, &quot;yi05&quot;, &quot;h&quot;, &quot;helium3&quot;,  &quot;He3&quot;,  &quot;He3&quot;     ],
            [ 6, &quot;yi06&quot;, &quot;a&quot;,  &quot;alpha&quot;,    &quot;He&quot;,      &quot;He4&quot;     ], [ 7, &quot;yi07&quot;, &quot;g&quot;,   &quot;gamma&quot;,    &quot;gamma&quot;, &quot;gamma&quot;    ],
            [ 8, &quot;yi08&quot;, &quot;e+&quot;, &quot;positron&quot;, &quot;b+&quot;,      &quot;positron&quot; ], [ 9, &quot;yi09&quot;, &quot;e-&quot;,  &quot;electron&quot;, &quot;b-&quot;,    &quot;electron&quot; ] ]
    for y in yis :
        if( yi in y ) : return( y )
    raise Exception( &quot;\nError from incidentParticleTags: invalid incident particle tag = %s&quot; % `yi` )</div>

<div class="viewcode-block" id="outgoingParticleTags"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.outgoingParticleTags">[docs]</a>def outgoingParticleTags( yo ) :
    &quot;&quot;&quot;Calls incidentParticleTags but allows for yo to be integers in the range 10 to 19 inclusive.&quot;&quot;&quot;

    yo_ = yo
    if( type( yo ) == type( 1 ) ) :
        if( ( yo &gt; 9 ) and ( yo &lt; 20 ) ) : yo -= 10
    return( [ yo_, ] + incidentParticleTags( yo ) )</div>

<div class="viewcode-block" id="intYoCIS"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.intYoCIS">[docs]</a>def intYoCIS( fileName ) :
    &quot;&quot;&quot;Returns the list of integers ( yo, C, I, S ) from fileName where fileName must be of the from &#39;yo##c##i###s###&#39;.&quot;&quot;&quot;

    if ( len( fileName ) != 15 ) : raise Exception( &quot;\nError from intYoCIS: bad file name = %s&quot; % `fileName` )
    return ( int( fileName[2:4] ), int( fileName[5:7] ), int( fileName[8:11] ), int( fileName[12:15] ) )</div>

<div class="viewcode-block" id="intZASuffix"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.intZASuffix">[docs]</a>def intZASuffix( ZA_ii ) :
    &quot;&quot;&quot;ZA_ii can be an integer (e.g., 92235) or a string of the from &quot;zaZZZAAA_suffix&quot; 
    (e.g., &quot;za095242m&quot;). Returns the tuple integer ZA and _suffix from ZA_i. For 
    examples, ZA_i = 92235 would return ( 92235, &quot;&quot; ) and ZA_i = &quot;za095242m&quot; would
    return ( 95242, &quot;m&quot; ).&quot;&quot;&quot;

    try :
        ZA_i = int( ZA_ii )
    except :
        ZA_i = ZA_ii
    if ( type( ZA_i ) == type( 1 ) ) : return ( ZA_i, &quot;&quot; )
    ZA = None
    Suffix = &quot;&quot;
    if ( ( type( ZA_i ) == type( &quot;&quot; ) ) or ( type( ZA_i ) == type( u&quot;&quot; ) ) ) :
        if( ZA_i[:2] == &quot;za&quot; ) and ( len( ZA_i ) &gt; 7 ) :
            ZA = int( ZA_i[2:8] )
            if ( len( ZA_i ) &gt; 8 ) and ( ZA_i[8] != &quot;/&quot; ) : Suffix = ZA_i[8:]
    elif ( type( ZA_i ) == type( 1 ) ) :
        ZA = int( ZA_i )
    if( ZA is None ) : raise Exception( &quot;\nError in intZA: invalid ZA = %s&quot; % `ZA_i` )
    return ( ZA, Suffix ) </div>

<div class="viewcode-block" id="intZA"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.intZA">[docs]</a>def intZA( ZA_i ) :
    &quot;&quot;&quot;Returns the ZA part of intZASuffix( ZA_i ).&quot;&quot;&quot;

    return intZASuffix( ZA_i )[0]</div>

<div class="viewcode-block" id="strZASuffix"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.strZASuffix">[docs]</a>def strZASuffix( ZA, suffix = &quot;&quot; ) :
    &quot;&quot;&quot;Converts ZA and suffix into &#39;za%6.6d%s&#39; % ( ZA, suffix ). If ZA is already of the form &#39;za%6.6d%s&#39;, it is returned
    without any change.&quot;&quot;&quot;

    if( suffix == &#39;m1&#39; ) : suffix = &#39;m&#39;
    if( type( ZA ) == type( 1 ) ) :
        strZA = &quot;za%6.6d%s&quot; % ( ZA, suffix )
    elif( type( ZA ) == type( &quot;&quot; ) ) :
        try :
            ZA = &quot;za%6.6d&quot; % int( ZA )
        except :
            pass
        strZA = &quot;%s%s&quot; % ( ZA, suffix )
    else :
        raise Exception( &quot;ZA must be an integer or a string of the form &#39;zaZZZAAA&#39;&quot; )
    return strZA</div>

<div class="viewcode-block" id="getmodestring_"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.getmodestring_">[docs]</a>def getmodestring_( I, callingRoutine ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    if ( I in [ 0, 7, 9, 10, 11, 12, 13, 30, 32, 80, 89, 90, 91, 92, 941, 942, 951 ] ) :
        s = &quot;2&quot;
    elif ( I in [ 1, 21, 22, 81, 84, 952 ] ) :
        s = &quot;3&quot;
    elif ( I in [ 3, 4, 20 ] ) :
        s = &quot;4&quot;
    else :
        raise Exception( &quot;\nError in %s: unsupported I-value = %d&quot; % ( callingRoutine, I ) )
    return s</div>

<div class="viewcode-block" id="getNumberOfColumns_"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.getNumberOfColumns_">[docs]</a>def getNumberOfColumns_( I, callingRoutine ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    return int( getmodestring_( I, callingRoutine )[0] )</div>

<div class="viewcode-block" id="processDataBase"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.processDataBase">[docs]</a>def processDataBase( database, oldFile, newFile, options = &quot;&quot;, defines = [], bdflsFile = None, ndfgen = None, mcfgen = None, endep = None, extraZAs = [] ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    ndfgenFile = &quot;&quot;
    mcfgenFile = &quot;&quot;
    endepFile = &quot;&quot;
    if( bdflsFile is not None ) :
        bdflsName = os.path.join( database, &#39;bdfls&#39; )
        if( os.path.exists( bdflsName ) ) :
            if( not os.path.islink( bdflsName ) ) : raise Exception( &#39;\nError in processDataBase: bdfls file already exists.&#39; )
            os.system( &#39;rm -f &#39; + bdflsName )
        os.system( &#39;ln -s %s %s&#39; % ( os.path.realpath( bdflsFile ), bdflsName ) )
    if( ndfgen is not None ) :
        if( not os.path.exists( ndfgen ) ) : raise Exception( &#39;Error in processDataBase: ndfgen does not exists at %s.&#39; % ndfgen )
        ndfgenFile = &#39; -ndfgen %s&#39; % os.path.realpath( ndfgen )
    if( mcfgen is not None ) :
        if( not os.path.exists( mcfgen ) ) : raise Exception( &#39;Error in processDataBase: mcfgen does not exists at %s.&#39; % mcfgen )
        mcfgenFile = &#39; -mcfgen %s&#39; % os.path.realpath( mcfgen )
    if( endep is not None ) :
        if( not os.path.exists( endep ) ) : raise Exception( &#39;Error in processDataBase: endep does not exists at %s.&#39; % endep )
        endepFile = &#39; -endep %s&#39; % os.path.realpath( endep )
    ds = &quot;&quot;
    for d in defines : ds += &#39;export %s; &#39; % d
    if( &quot;-no_u&quot; not in options ) : options += &quot; -u &quot;
    if( &quot;-no_i&quot; not in options ) : options += &quot; -i &quot;
    if( len( extraZAs ) != 0 ) : 
        f = open( os.path.join( database, &#39;extraZAs&#39; ), &#39;w&#39; )
        for zas in extraZAs :
            ZA, suffix = intZASuffix( zas )
            f.write( &quot;za%.6d%s\n&quot; % ( ZA, suffix ) )
        f.close( )
    s = &#39;$FUDGEPATH/Src/endlmod.com &#39; + options + ndfgenFile + mcfgenFile + endepFile + &#39; &#39; + database + &#39; &#39; + oldFile + &#39; &#39; + newFile
    if( ds != &quot;&quot; ) : print ds
    print s
    status = os.system( ds + s )
    if( status != 0 ) : raise Exception( &quot;\nError in processDataBase: endlmod.com failed&quot; )</div>

<div class="viewcode-block" id="headerFunkyDouble2String"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.headerFunkyDouble2String">[docs]</a>def headerFunkyDouble2String( d ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    nines = 9.999                       # Must be less than 15 nines otherwise log10 may not return as excepted.
    maxValue, abs_d = nines * 1e10, abs( d )
    if( d &lt; 0 ) : maxValue /= 10
    if( 1e-2 &lt; abs_d &lt; maxValue ) :
        precisionMax = 8
        if( d &gt; 0 ) : precisionMax += 1
        precision = max( 0, min( precisionMax, precisionMax - int( math.log10( abs_d ) ) ) )
        s = ( &quot;%%11.%df&quot; % precision ) % d
    else :
        precision = 6
        eOffset = 8
        if( d &lt; 0 ) : precision -= 1
        if( ( abs_d &lt; ( nines * 1e-100 ) ) or ( abs_d &gt; ( nines * 1e99 ) ) ) :
            if( abs_d != 0 ) : eOffset -= 1
            precision -= 1
        s = ( &quot;%%12.%de&quot; % precision ) % d
        s = s[:eOffset] + s[eOffset+1:]
    return s</div>

<div class="viewcode-block" id="headerString2FunkyDouble"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.headerString2FunkyDouble">[docs]</a>def headerString2FunkyDouble( s, i, callingRoutine, newMethod = True ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    if( newMethod ) :
        fd = s[i:i+11]
        for i in xrange( 11 ) :
            if( fd[i] != &#39; &#39; ) : break
        if( ( i &lt; 11 ) and ( fd[i] in &#39;-+&#39; ) ) : i += 1
        for i in xrange( i, 11 ) :
            if( fd[i] not in string.digits ) : break
        if( ( i &lt; 11 ) and ( fd[i] == &#39;.&#39; ) ) :
            i += 1
            for i in xrange( i, 11 ) :
                if( fd[i] not in string.digits ) : break
        f = fd[:i]
        if( ( i &lt; 11 ) and ( fd[i] in &#39;-+&#39; ) ) : f = f + &#39;e&#39;
        for j in xrange( i, 11 ) :
            if( fd[j] == &#39; &#39; ) :
                f = f + &#39;0&#39;
            else :
                f = f + fd[j]
    else :
        f = s[i:i+11]
        try :
            d = float( f )
        except :
            if ( ( s[i+7] == &quot;e&quot; ) or ( s[i+7] == &quot;E&quot; ) ) :
                f = s[i:i+11]
            else :
                f = s[i:i+8] + &quot;e&quot; + s[i+8:i+11]
                if ( ( f[1] == &quot; &quot; ) or ( f[1] == &quot;-&quot; ) ) : f = f[1:8] + &quot;0&quot; + f[8:]
                if ( f[10] == &quot; &quot; ) : f = f[:10] + &quot;0&quot; + f[11:]
    try :
        d = float( f )
    except :
        raise Exception( &quot;\nError in %s: invalid FunkyDouble\n&lt;%s&gt;&quot; % ( callingRoutine, s[i:] ) )
    return( d )</div>

<div class="viewcode-block" id="getFullPath"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.getFullPath">[docs]</a>def getFullPath( file, path = None ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    if ( type( file ) != type( &quot;&quot; ) ) : raise Exception( &quot;\nError in getFullPath: file name is not a string&quot; )
    if ( len( file ) &lt; 1 ) : raise Exception( &quot;\nError in getFullPath: file name is an empty string&quot; )
    if ( os.path.isabs( file ) ) :                  # Absolute path.
        f = file
    elif ( file[0] == &quot;~&quot; ) :                       # Users home directory.
        f = os.path.expanduser( file )
    elif ( os.path.exists( file ) ) :
        f = os.path.abspath( file )
    elif ( ( file[:2] != &quot;./&quot; ) and ( path is not None ) ) :
        if ( type( path ) != type( &quot;&quot; ) ) : raise Exception( &quot;\nError in getFullPath: path name is not a string&quot; )
        if ( len( path ) &lt; 1 ) : raise Exception( &quot;\nError in getFullPath: path name is an empty string&quot; )
        f = os.path.join( path, file )
    else :
        f = os.path.abspath( file )
    f = os.path.normpath( f )
    if ( not os.path.exists( f ) ) : return ( f, 0 )        # File or directory does not exist
    if (     os.path.isfile( f ) ) : return ( f, 1 )        # f is a file.
    if (     os.path.isdir( f ) )  : return ( f, 2 )        # f is a directory.
    raise Exception( &quot;\nError in getFullPath: %s exists but is not a file or directory&quot; )</div>

<div class="viewcode-block" id="getAbsPath_withDefaultDBCheck"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.getAbsPath_withDefaultDBCheck">[docs]</a>def getAbsPath_withDefaultDBCheck( file ) :
    &quot;&quot;&quot;This routine returns the absolute path for file using getFullPath and then os.path.abspath. If the file is in 
    fudgeDefaults.NUCLEAR_DATABASE_DIR, then the name will contain this even if fudgeDefaults.NUCLEAR_DATABASE_DIR
    is itself a link.&quot;&quot;&quot;

    path, Status = getFullPath( file )
    path = os.path.realpath( path )
    DB_DIR = fudgeDefaults.NUCLEAR_DATABASE_DIR
    real_DB_DIR = os.path.realpath( DB_DIR )
    if( path[:len( real_DB_DIR )] == real_DB_DIR ) : path = os.path.join( DB_DIR, path[len( real_DB_DIR ) + 1:] )
    return( path, Status )</div>

<div class="viewcode-block" id="appendyiDirIfNeeded"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.appendyiDirIfNeeded">[docs]</a>def appendyiDirIfNeeded( path, yi ) :
    &quot;&quot;&quot;Appends the sub-directory yi## if it is not the last sub-directory of
    path.  ## is yi convert to a 2-digit integer.&quot;&quot;&quot;

    Stryi = incidentParticleTags( yi )[1]
    if ( Stryi != path[-4:] ) : path = os.path.join( path, Stryi )
    return path</div>

<div class="viewcode-block" id="validZADirectoryName_"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.validZADirectoryName_">[docs]</a>def validZADirectoryName_( name ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    if ( ( re.match( r&quot;za\d\d\d\d\d\d$&quot;, name ) ) or ( re.match( r&quot;za\d\d\d\d\d\dm&quot;, name ) ) ) : return 1
    return 0</div>

<div class="viewcode-block" id="check_mapMuEpToGrid"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.check_mapMuEpToGrid">[docs]</a>def check_mapMuEpToGrid( data ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    E = None
    for d in data.data :
        if ( E != d[0] ) :
            if ( E is not None ) :  print &quot;E =&quot;, E, &quot;  Sum =&quot;, s / 2.
            E = d[0]
            Ep2 = d[1]
            P2 = d[2]
            s = 0
        else :
            Ep1 = Ep2
            Ep2 = d[1]
            P1 = P2
            P2 = d[2]
            s += ( P2 + P1 ) * ( Ep2 - Ep1 )
    if ( E is not None ) : print &quot;E =&quot;, E, &quot;  Sum =&quot;, s / 2.</div>

<div class="viewcode-block" id="simplifyDataLine"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.simplifyDataLine">[docs]</a>def simplifyDataLine( l, n, callingRoutine, comment ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    ls = string.split( l, comment )[0]
    ls = string.replace( ls, &quot;,&quot;, &quot; &quot; )
    ls = string.replace( ls, &quot;\t&quot;, &quot; &quot; )
    if ( ls == &quot;&quot; ) : return None
    v = string.split( ls )
    if( ( n is not None ) and ( len( v ) != n ) ) :
        raise Exception( &quot;\nError in %s: line has %d values, expected %d\n%s&quot; % ( callingRoutine, len( v ), n, l ) )
    return v</div>

<div class="viewcode-block" id="getFormat"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.getFormat">[docs]</a>def getFormat( self ) :
    &quot;&quot;&quot;Checks if self has a getFormat method. If it does not, then None is returned. If it does then: 
    1) if getFormat returns a string or None then it is returned else getFormat must return an 
    integer, n1. If n1 is 12 (default for legacy ENDL) then None is returned else returns string 
    &#39;%n1.n2e&#39; where n2 = n1 - 7.&quot;&quot;&quot;

    try :
        format = self.getFormat( )
        if( ( format is None ) or ( type( format ) == type( &#39;&#39; ) ) ) : return( format )
        if( format == 12 ) :
            format = None
        else :
            format = &#39;%%%d.%de&#39; % ( format, format - 7 )
    except :
        format = None
    return( format )</div>

<div class="viewcode-block" id="read1dDataFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.read1dDataFile">[docs]</a>def read1dDataFile( fn, comment = &quot;#&quot;, i0 = 0 ) :
    &quot;&quot;&quot;Opens file with name fn, reads in the data, closes the file and then
    calls translate1dStringData with the data.  Returns the results of translate1dStringData.&quot;&quot;&quot;

    f = open( fn, &quot;r&quot; )
    ls = f.readlines( )
    f.close( )
    return translate1dStringData( ls, comment = comment, i0 = i0 )</div>

<div class="viewcode-block" id="translate1dStringData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.translate1dStringData">[docs]</a>def translate1dStringData( ls, comment = &quot;#&quot;, i0 = 0 ) :
    &quot;&quot;&quot;
Translates 1d data from the list of strings ls and returns ::
    list[ number ].
This list can be used as input when creating endl1dmath instances. All strings starting 
with comment are ignored and all data in a string after comment are ignored.  
After comments are removed, the strings can only contain one numbers per line 
else a raise is issued.  The x-component is column i0.&quot;&quot;&quot;

    if ( i0 != 0 ) :
        raise Exception( &quot;\nError in endlmisc.translate1dStringData: Invalid i0 = %s value&quot; % ( `i0` ) )
    d1 = []
    n = None
    for l in ls :
        sl = simplifyDataLine( l, n, &quot;translate1dStringData&quot;, comment )
        if( sl is not None ) :
            if( n is None ) : n = len( sl )
            d1.append( float( sl[i0] ) )
    return d1</div>

<div class="viewcode-block" id="read2dDataFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.read2dDataFile">[docs]</a>def read2dDataFile( fn, comment = &quot;#&quot;, i0 = 0, i1 = 1 ) :
    &quot;&quot;&quot;Opens file with name fn, reads in the data, closes the file and then
    calls translate2dStringData with the data.  Returns the results of translate2dStringData.&quot;&quot;&quot;

    f = open( fn, &quot;r&quot; )
    ls = f.readlines( )
    f.close( )
    return translate2dStringData( ls, comment = comment, i0 = i0, i1 = i1 )</div>

<div class="viewcode-block" id="translate2dStringData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.translate2dStringData">[docs]</a>def translate2dStringData( ls, comment = &quot;#&quot;, i0 = 0, i1 = 1 ) :
    &quot;&quot;&quot;
Translates 2d data from the list of strings ls and returns ::
    list[ number, number ].
This list can be used as input when creating endl2dmath instances. All strings starting 
with comment are ignored and all data in a string after comment are ignored.  
After comments are removed, the strings can only contain two numbers per line 
else a raise is issued.  The x-component is column i0 of the data and the
y-component is column i1 (i0 and i1 can only be 0 or 1).&quot;&quot;&quot;

    i = [ i0, i1 ]
    i.sort( )
    if ( i[0] != 0 ) or ( i[1] != 1 ) :
        raise Exception( &quot;\nError in endlmisc.translate2dStringData: Invalid i0 = %s and/or i1 = %s value(s)&quot; % ( `i0`, `i1` ) )
    ConvertDs = 0
    if ( len( ls ) &gt; 0 ) and ( len( ls[0] ) &gt; 25 ) :
        if ( ls[0][10] == &quot;D&quot; ) and ( ls[0][22] == &quot;D&quot; ) : ConvertDs = 1
    d2 = []
    n = None
    for l in ls :
        if ( ConvertDs ) : l = re.sub( r&#39;[D]&#39;, &#39;E&#39;, l )
        sl = simplifyDataLine( l, 2, &quot;translate2dStringData&quot;, comment )
        if( sl is not None ) : 
            if( n is None ) : n = len( sl )
            d2.append( [ float( sl[i0] ), float( sl[i1] ) ] )
    return d2</div>

<div class="viewcode-block" id="read3dDataFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.read3dDataFile">[docs]</a>def read3dDataFile( fn, comment = &quot;#&quot;, i0 = 0, i1 = 1, i2 = 2 ) :
    &quot;&quot;&quot;Opens file with name fn, reads in the data, closes the file and then
    calls translate3dStringData with the data.  Returns the results of translate3dStringData.&quot;&quot;&quot;

    f = open( fn, &quot;r&quot; )
    ls = f.readlines( )
    f.close( )
    return translate3dStringData( ls, comment = comment, i0 = i0, i1 = i1, i2 = i2 )</div>

<div class="viewcode-block" id="translate3dData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.translate3dData">[docs]</a>def translate3dData( data, i0 = 0, i1 = 1, i2 = 2 ) :
    &quot;&quot;&quot;
Translates 3d data from the list of (x,y,z) data and returns ::
    list[ number, list[ number, number ] ].
The returned list can be used as input when creating endl3dmath instances.
The x-component is column i0 of the data, the y-component is column i1 and
the z-component is column i2 (i0, i1 and i2 can only be 0, 1 or 2).&quot;&quot;&quot;

    i = [ i0, i1, i2 ]
    i.sort( )
    if ( i[0] != 0 ) or ( i[1] != 1 ) or ( i[2] != 2 ) :
        raise Exception( &quot;\nError in endlmisc.translate3dData: Invalid i0 = %s, i1 = %s and/or i2 = %s value(s)&quot; % ( `i0`, `i1`, `i2` ) )
    x0 = None
    d3 = []
    for d in data :
        x = d[i0]
        if ( x != x0 ) :
            if ( x0 is not None ) : d3.append( [ x0, d2 ] )
            d2 = []
            x0 = x
        d2.append( [ d[i1], d[i2] ] )
    if ( x0 is not None ) : d3.append( [ x, d2 ] )
    return d3</div>

<div class="viewcode-block" id="translate3dStringData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.translate3dStringData">[docs]</a>def translate3dStringData( ls, comment = &quot;#&quot;, i0 = 0, i1 = 1, i2 = 2 ) :
    &quot;&quot;&quot;
Translates 3d data from the list of strings ls and returns ::
    list[ number, list[ number, number ] ]. 
The returned list can be used as input when creating endl3dmath instances. All strings
starting with comment are ignored and all data in a string after comment are ignored.
After comments are removed, the strings can only contain three numbers per line
else a raise is issued.  The x-component is column i0 of the data, the y-component
is column i1 and the z-component is column i2 (i0, i1 and i2 can only be 0, 1 or 2).&quot;&quot;&quot;

    i = [ i0, i1, i2 ]
    i.sort( )
    if ( i[0] != 0 ) or ( i[1] != 1 ) or ( i[2] != 2 ) :
        raise Exception( &quot;\nError in endlmisc.translate3dStringData: Invalid i0 = %s, i1 = %s and/or i2 = %s value(s)&quot; % ( `i0`, `i1`, `i2` ) )
    x0 = None
    d3 = []
    n = None
    for l in ls :
        sl = simplifyDataLine( l, 3, &quot;translate3dStringData&quot;, comment )
        if( sl is not None ) :
            if( n is None ) : n = len( sl )
            x = float( sl[i0] )
            if ( x != x0 ) :
                if ( x0 is not None ) : d3.append( [ x0, d2 ] )
                d2 = []
                x0 = x
            d2.append( [ float( sl[i1] ), float( sl[i2] ) ] )
    if ( x0 is not None ) : d3.append( [ x, d2 ] )
    return d3</div>

<div class="viewcode-block" id="print3dData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.print3dData">[docs]</a>def print3dData( d, i0 = 0, i1 = 1, i2 = 2, fmt0 = None, fmt1 = None, fmt2 = None ) :
    &quot;&quot;&quot;Calls string3dData and print its results.&quot;&quot;&quot;

    s = string3dData( d, i0 = i0, i1 = i1, i2 = i2, fmt0 = fmt0, fmt1 = fmt1, fmt2 = fmt2 )
    for i in s : print i</div>

<div class="viewcode-block" id="string3dData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.string3dData">[docs]</a>def string3dData( d, i0 = 0, i1 = 1, i2 = 2, fmt0 = None, fmt1 = None, fmt2 = None ) :
    &quot;&quot;&quot;Returns a list of strings for data d.  D must be list[ number, list[ number, number ] ].&quot;&quot;&quot;

    from fudge.legacy.endl import endl3dmathmisc
    i = [ i0, i1, i2 ]
    i.sort( )
    if ( i[0] != 0 ) or ( i[1] != 1 ) or ( i[2] != 2 ) :
        raise Exception( &quot;\nError in endlmisc.string3dData: Invalid i0 = %s, i1 = %s and/or i2 = %s value(s)&quot; % ( `i0`, `i1`, `i2` ) )
    if( fmt0 is None ) : fmt0 = endl3dmathmisc.endl3d_repr_xFormat
    if( fmt1 is None ) : fmt1 = endl3dmathmisc.endl3d_repr_yFormat
    if( fmt2 is None ) : fmt2 = endl3dmathmisc.endl3d_repr_zFormat
    fmt = [ fmt0, fmt1, fmt2 ]
    s = []
    sa = [ &quot;&quot;, &quot;&quot;, &quot;&quot; ]
    for d0 in d :
        sa[i0] = fmt[i0] % d0[0]
        for d1 in d0[1] :
            sa[i1] = fmt[i1] % d1[0]
            sa[i2] = fmt[i2] % d1[1]
            s.append( &quot;%s %s %s&quot; % ( sa[0], sa[1], sa[2] ) )
    return s</div>

<div class="viewcode-block" id="read4dDataFile"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.read4dDataFile">[docs]</a>def read4dDataFile( fn, comment = &quot;#&quot;, i0 = 0, i1 = 1, i2 = 2, i3 = 3 ) :
    &quot;&quot;&quot;Opens file with name fn, reads in the data, closes the file and then calls
    translate4dStringData with the data.  Returns the results of translate4dStringData.&quot;&quot;&quot;

    f = open( fn, &quot;r&quot; )
    ls = f.readlines( )
    f.close( )
    return translate4dStringData( ls, comment = comment, i0 = i0, i1 = i1, i2 = i2, i3 = i3 )</div>

<div class="viewcode-block" id="translate4dData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.translate4dData">[docs]</a>def translate4dData( data, comment = &quot;#&quot;, i0 = 0, i1 = 1, i2 = 2, i3 = 3 ) :
    &quot;&quot;&quot;
Translates 4d data from the list of (x,y,z,zz) data and returns ::
    list[ number, list[ number, list[ number, number ] ] ].
The returned list that can be used as input when creating endl4dmath instances.
The x-component is column i0 of the data, the y-component is column i1, the
z-component is column i2 and the zz-component is column i3
(i0, i1, i2 and i3 can only be 0, 1, 2 or 3).&quot;&quot;&quot;

    i = [ i0, i1, i2, i3 ]
    i.sort( )
    if ( i[0] != 0 ) or ( i[1] != 1 ) or ( i[2] != 2 ) or ( i[3] != 3 ) :
        s = &quot;Invalid i0 = %s, i1 = %s, i2 = %s and/or i3 = %s value(s)&quot; % ( `i0`, `i1`, `i2`, `i3` )
        raise Exception( &quot;\nError in endlmisc.translate4dData: %s&quot; % s )
    x0 = None
    y0 = None
    d4 = []
    for d in data :
        x = d[i0]
        y = d[i1]
        if ( x != x0 ) :
            if ( y0 is not None ) : d3.append( [ y0, d2 ] )
            if ( x0 is not None ) : d4.append( [ x0, d3 ] )
            d2 = []
            d3 = []
            x0 = x
            y0 = y
        elif ( y != y0 ) :
            d3.append( [ y0, d2 ] )
            d2 = []
            y0 = y
        d2.append( [ d[i2], d[i3] ] )
    if ( y0 is not None ) : d3.append( [ y0, d2 ] )
    if ( x0 is not None ) : d4.append( [ x0, d3 ] )
    return d4</div>

<div class="viewcode-block" id="translate4dStringData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.translate4dStringData">[docs]</a>def translate4dStringData( ls, comment = &quot;#&quot;, i0 = 0, i1 = 1, i2 = 2, i3 = 3 ) :
    &quot;&quot;&quot;
Translates 4d data from the list of strings ls and returns ::
    list[ number, list[ number, list[ number, number ] ] ].

This list that can be used as input when creating endl4dmath instances. All strings
starting with comment are ignored and all data in a string after comment are ignored.
After comments are removed, the strings can only contain four numbers per line
else a raise is issued.  The x-component is column i0 of the data, the y-component
is column i1, the z-component is column i2 and the zz-component is column i3 
(i0, i1, i2 and i3 can only be 0, 1, 2 or 3).&quot;&quot;&quot;

    i = [ i0, i1, i2, i3 ]
    i.sort( )
    if ( i[0] != 0 ) or ( i[1] != 1 ) or ( i[2] != 2 ) or ( i[3] != 3 ) :
        s = &quot;Invalid i0 = %s, i1 = %s, i2 = %s and/or i3 = %s value(s)&quot; % ( `i0`, `i1`, `i2`, `i3` )
        raise Exception( &quot;\nError in endlmisc.translate4dStringData: %s&quot; % s )
    x0 = None
    y0 = None
    d4 = []
    n = None
    for l in ls :
        sl = simplifyDataLine( l, 4, &quot;translate4dStringData&quot;, comment )
        if( sl is not None ) :
            if( n is None ) : n = len( sl )
            x = float( sl[i0] )
            y = float( sl[i1] )
            if ( x != x0 ) :
                if ( y0 is not None ) : d3.append( [ y0, d2 ] )
                if ( x0 is not None ) : d4.append( [ x0, d3 ] )
                d2 = []
                d3 = []
                x0 = x
                y0 = y
            elif ( y != y0 ) :
                d3.append( [ y0, d2 ] )
                d2 = []
                y0 = y
            d2.append( [ float( sl[i2] ), float( sl[i3] ) ] )
    if ( y0 is not None ) : d3.append( [ y0, d2 ] )
    if ( x0 is not None ) : d4.append( [ x0, d3 ] )
    return d4</div>

<div class="viewcode-block" id="print4dData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.print4dData">[docs]</a>def print4dData( d, i0 = 0, i1 = 1, i2 = 2, i3 = 3, fmt0 = None, fmt1 = None, fmt2 = None, fmt3 = None ) :
    &quot;&quot;&quot;Calls string4dData and print its results.&quot;&quot;&quot;

    s = string4dData( d, i0 = i0, i1 = i1, i2 = i2, i3 = i3, fmt0 = fmt0, fmt1 = fmt1, fmt2 = fmt2, fmt3 = fmt3 )
    for i in s : print i</div>

<div class="viewcode-block" id="string4dData"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.string4dData">[docs]</a>def string4dData( d, i0 = 0, i1 = 1, i2 = 2, i3 = 3, fmt0 = None, fmt1 = None, fmt2 = None, fmt3 = None ) :
    &quot;&quot;&quot;Returns a list of strings for data d.  D must be list[ number, list[ number, list[ number, number ] ] ].&quot;&quot;&quot;

    from fudge.legacy.endl import endl4dmathmisc
    i = [ i0, i1, i2, i3 ]
    i.sort( )
    if ( i[0] != 0 ) or ( i[1] != 1 ) or ( i[2] != 2 ) or ( i[3] != 3 ) :
        raise Exception( &quot;\nError in endlmisc.string4dData: %s&quot; % &quot;Invalid i0 = %s, i1 = %s, i2 = %s, and/or i3 = %s&quot; % (`i0`,`i1`,`i2`,`i3`) )
    if( fmt0 is None ) : fmt0 = endl4dmathmisc.endl4d_repr_tFormat
    if( fmt1 is None ) : fmt1 = endl4dmathmisc.endl4d_repr_xFormat
    if( fmt2 is None ) : fmt2 = endl4dmathmisc.endl4d_repr_yFormat
    if( fmt3 is None ) : fmt3 = endl4dmathmisc.endl4d_repr_zFormat
    fmt = [ fmt0, fmt1, fmt2, fmt3 ]
    s = []
    sa = [ &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot; ]
    for d0 in d :
        sa[i0] = fmt[i0] % d0[0]
        for d1 in d0[1] :
            sa[i1] = fmt[i1] % d1[0]
            for d2 in d1[1] :
                sa[i2] = fmt[i2] % d2[0]
                sa[i3] = fmt[i3] % d2[1]
                s.append( &#39; &#39;.join( sa ) )
    return s</div>

<div class="viewcode-block" id="stringWithPrefixSuffix"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.stringWithPrefixSuffix">[docs]</a>def stringWithPrefixSuffix( list, Prefix = &quot;&quot;, Suffix = &quot;&quot; ) :
    &quot;&quot;&quot;For internal use only.&quot;&quot;&quot;

    PS = &quot;\n&quot;
    if( len( list ) &gt; 0 ) :
        list[0] = Prefix + list[0]
        list[-1] = list[-1] + Suffix + &quot;\n&quot;
        PS = Suffix + &quot;\n&quot; + Prefix
    list = PS.join( list )
    return list</div>

<div class="viewcode-block" id="endlCheckerObject"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.endlCheckerObject">[docs]</a>class endlCheckerObject :

    sortOrder = [ &#39;database&#39;, &#39;yi&#39;, &#39;ZA&#39;, &#39;suffix&#39;, &#39;C&#39;, &#39;S&#39;, &#39;X1&#39;, &#39;yo&#39;, &#39;Q&#39;, &#39;I&#39;, &#39;X2&#39;, &#39;X3&#39;, &#39;X4&#39;, &#39;message&#39; ]
    
    def __init__( self, data = None, database = None, yi = None, ZA = None, suffix = None, yo = None, C = None, I = None, S = None, X1 = None, \
        X2 = None, X3 = None, X4 = None, Q = None, message = &#39;&#39; ) :

        self.database = database
        self.yi = yi
        self.ZA = ZA
        self.suffix = suffix
        self.yo = yo
        self.C = C
        self.I = I
        self.S = S
        self.X1 = X1
        self.X2 = X2
        self.X3 = X3
        self.X4 = X4
        self.Q = Q
        self.message = message
        self.indentation = &#39;  &#39;
        if( data is not None ) :
            self.yi = data.yi
            self.ZA = data.ZA
            self.yo = data.yo
            self.C = data.C
            self.I = data.I
            self.S = data.S
            self.X1 = data.X1
            self.X2 = data.X2
            self.X3 = data.X3
            self.X4 = data.X4
            self.Q = data.Q

    def __cmp__( self, other ) :

        def diffWithNone( v1, v2 ) :

            if( v1 == v2 ) : return( 0 )
            if( v1  &gt; v2 ) : return( 1 )
            return( -1 )

        if( type( self ) != type( other ) ) : raise Exception( &#39;Error in endlmisc.endlCheckerObject.__cmp__: other not a endlCheckerObject class object&#39; )
        for attr in endlCheckerObject.sortOrder :
            if( getattr( self, attr ) != getattr( other, attr ) ) : return( diffWithNone( getattr( self, attr ), getattr( other, attr ) ) )
        return( 0 )
        
    def __hash__( self ):
        h = ( hash( self.X2 ) + hash( self.X3 ) + hash( self.X4 ) + hash( self.Q ) ) \
            + hash( self.C ) * 100 \
            + ( hash( self.S ) + hash( self.X1 ) ) * 1000 \
            + hash( self.yo ) * 10000 \
            + hash( self.I ) * 100000 \
            + ( hash( self.ZA ) + hash( self.suffix ) ) * 1000000 \
            + ( hash( self.yi ) ) * 10000000 \
            + ( hash( self.database ) ) * 100000000
        if type( self.message ) == str: h += hash( self.message )
        elif type( self.message ) == list: h += sum( map( hash, self.message ) )
        return h

    def __repr__( self ) :

        return( &#39;\n&#39;.join( self.toListOfStrings( indentation = self.indentation, subIndentation = self.indentation ) ) )

<div class="viewcode-block" id="endlCheckerObject.toString"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.endlCheckerObject.toString">[docs]</a>    def toString( self, selections = [], returnNoneOnNoMatches = True ) :

        slos = self.toSelectedListOfStrings( indentation = self.indentation, subIndentation = self.indentation, selections = selections )
        if( ( len( slos ) == 1 ) and returnNoneOnNoMatches ) : return( None )
        return( &#39;\n&#39;.join( slos ) )</div>

<div class="viewcode-block" id="endlCheckerObject.toSelectedListOfStrings"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.endlCheckerObject.toSelectedListOfStrings">[docs]</a>    def toSelectedListOfStrings( self, indentation = None, subIndentation = None, selections = [] ) :

        los = self.toListOfStrings( indentation = self.indentation, subIndentation = self.indentation )
        if( len( selections ) &gt; 0 ) :
            slos = los[:1]
            for lo in los[1:] :
                for selection in selections :
                    if( re.search( selection, lo ) ) :
                        slos.append( lo )
                        break
            los = slos
        return( los )</div>

<div class="viewcode-block" id="endlCheckerObject.toListOfStrings"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.endlCheckerObject.toListOfStrings">[docs]</a>    def toListOfStrings( self, indentation = None, subIndentation = None ) :

        def toInt( v, n ) :

            abs_n = abs( n )
            try :
                s = &#39;%d&#39; % v
            except :
                s = abs_n * &#39;?&#39;
            sn = len( s )
            filler = &#39;0&#39;
            if( n &lt; 0 ) : filler = &#39; &#39;
            if( sn &lt; abs_n ) : s = ( abs_n - sn ) * filler + s
            return( s )

        def toFloat( v ) :

            try :
                s = &#39;%e&#39; % v
            except :
                s = &#39;????????????&#39;
            return( s )

        def toStr( s ) :
            
            if s is None : s = &#39;&#39;
            s = str( s )
            return( s )

        if( indentation is None ) : indentation = self.indentation
        if( subIndentation is None ) : subIndentation = self.indentation
        s = []
        if( self.message != &#39;&#39; ) :
            yi = toInt( self.yi, -2 )
            ZA = toInt( self.ZA, -6 )
            suffix = toStr( self.suffix )
            yo = toInt( self.yo, 2 )
            C = toInt( self.C, 2 )
            I = toInt( self.I, 3 )
            S = toInt( self.S, 3 )
            X1 = toFloat( self.X1 )
            X2 = toFloat( self.X2 )
            X3 = toFloat( self.X3 )
            X4 = toFloat( self.X4 )
            Q = toFloat( self.Q )
            fileName = &#39;yo%sc%si%ss%s&#39; % ( yo, C, I, S )
            s = [ indentation + &#39;Error for yi = %s, ZA = %s%s, %s, X1 = %s, X2 = %s, X3 = %s, X4 = %s, Q = %s&#39; % ( yi, ZA, suffix, fileName, X1, X2, X3, X4, Q ) ]
            s += checkMessagesToString( self.message, indentation = indentation + subIndentation )
        return( s )</div></div>

<div class="viewcode-block" id="checkMessagesToString"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.checkMessagesToString">[docs]</a>def checkMessagesToString( message, indentation = &#39;  &#39;, subIndentation = &#39;  &#39; ) :

    s = []
    if( type( message ) == type( &#39;&#39; ) ) :
        s += [ indentation + message ]
    else :
        for m in message :
            if( type( m ) == type( &#39;&#39; ) ) :
                s += [ indentation + m  ]
            elif( ( type( m ) == type( [] ) ) or ( type( m ) == type( [] ) ) ) :
                if( len( m ) != 2 ) : raise Exception( &#39;Error in endlmisc.checkMessagesToString: len( m ) = %d != 2 )&#39; % len( m ) )
                s += [ indentation + m[0] ]
                s += checkMessagesToString( m[1], indentation = indentation + subIndentation  )
            else :
                raise Exception( &#39;Error in endlmisc.checkMessagesToString: invalid message type = %s&#39; % type( m ) )
    return( s )</div>

<div class="viewcode-block" id="checkCulling"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.checkCulling">[docs]</a>def checkCulling( errs, cullStrings ) :
    &quot;&quot;&quot;
    Removes all messages containing sub-strings listed in cullStrings. cullStrings can be either a string or a
    list of strings. If as list of strings, each string must be a sub-string in a message for the message to
    be culled.
    &quot;&quot;&quot;

    def checkCullingMatch( message, cullStrings ) :

        found = True
        for cullString in cullStrings : found = found and ( cullString in message )
        return( found )

    def checkCulling2( message, cullStrings, level = 0 ) :

        if( isinstance( message, list ) ) :
            messages = []
            for msg in message :
                msg1 = checkCulling2( msg, cullStrings, level + 1 )
                if( msg1 is not None ) : messages.append( msg1 )
            if( len( messages ) &lt; 2 ) : messages = None
            return( messages )
        else :
            if( checkCullingMatch( message, cullStrings ) ) : return( None )
            return( message )

    if( isinstance( cullStrings, str ) ) : cullStrings = [ cullStrings ]
    errs2 = []
    for err in errs :
        messages = []
        if( isinstance( err.message, str ) ) :
            if( not( checkCullingMatch( err.message, cullStrings ) ) ) : errs2.append( err )
        else :
            for message in err.message :
                message = checkCulling2( message, cullStrings )
                if( message is not None ) :
                    messages.append( message )
            if( len( messages ) &gt; 0 ) :
                err.message = messages
                errs2.append( err )
    return( errs2 )</div>

<div class="viewcode-block" id="printWarning"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.printWarning">[docs]</a>def printWarning( s ) :

    sys.stderr.write( s )
    if( s[-1:] != &#39;\n&#39; ) : sys.stderr.write( &#39;\n&#39; )</div>

<div class="viewcode-block" id="endlToFudgeInterpolation"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.endlToFudgeInterpolation">[docs]</a>def endlToFudgeInterpolation( interpolation ) :
    &quot;&quot;&quot;This function converts an endl interpolation value (0 or 2 is lin-lin, 3 is log-lin, 4 is lin-log and
    5 is log-log) into a fudge interpolation value (0 is lin-lin, 1 is log-lin, 2 is lin-log and 3 is log-log).&quot;&quot;&quot;

    if( ( interpolation &lt; 0 ) or ( interpolation &gt; 5 ) or ( interpolation == 1 ) ) : raise Exception( &quot;Invalid ENDL interpolation value = %d&quot; % interpolation )
    return( ( 0, None, 0, 1, 2, 3 )[interpolation] )</div>

<div class="viewcode-block" id="fudgeToEndlInterpolation"><a class="viewcode-back" href="../../../../fudge/fudge.legacy.endl.html#fudge.legacy.endl.endlmisc.fudgeToEndlInterpolation">[docs]</a>def fudgeToEndlInterpolation( interpolation ) :
    &quot;&quot;&quot;This function converts a fudge interpolation value into an end interpolation value (see endlToFudgeInterpolation
    for valid interpolation vales.&quot;&quot;&quot;

    if( ( interpolation &lt; 0 ) or ( interpolation &gt; 3 ) ) : raise Exception( &quot;Invalid FUDGE interpolation value = %d&quot; % interpolation )
    return( ( 0, 3, 4, 5 )[interpolation] )</div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/gnd.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">Fudge and GNDS 4.2.3 beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../endl.html" >fudge.legacy.endl</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012, B.Beck, D. Brown, C. Mattoon, N. Patel, N. Summers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>