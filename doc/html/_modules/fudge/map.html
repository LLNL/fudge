
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>fudge.map &#8212; Fudge and GNDS 6.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    
    <link rel="shortcut icon" href="../../_static/gnd-20121206-favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Fudge and GNDS 6.1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">fudge.map</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for fudge.map</h1><div class="highlight"><pre>
<span></span><span class="c1"># &lt;&lt;BEGIN-copyright&gt;&gt;</span>
<span class="c1"># &lt;&lt;END-copyright&gt;&gt;</span>

<span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">This module contains classes for dealing with a **GNDS** map file. A map file creates a nuclear data library </span>
<span class="s2">from a list of **GNDS** **reactionSuite** files.</span>

<span class="s2">Example of expected usage:</span>

<span class="s2">.. code-block::</span>

<span class="s2">    from fudge import map as mapModule</span>
<span class="s2">    file = &#39;/path/to/GIDI/Test/Data/MG_MC/all_maps.map&#39;</span>
<span class="s2">    map = mapModule.read( file )    # Read in a map file.</span>
<span class="s2">    m_O16 = map.find( &#39;n&#39;, &#39;O16&#39; )  # Gets a reference to a map Protare instance for &quot;n + O16&quot;.</span>
<span class="s2">    O16 = m_O16.read( )             # Creates a FUDGE protare (i.e., reactionSuite instance).</span>

<span class="s2">Note, in general, most user should get a protare (i.e., **GNDS** **reactionSuite**) this way.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">__todo</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    -) Need to make Base and some other classes a meta class.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">pathlib</span>

<span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">GNDS_formatVersion</span> <span class="k">as</span> <span class="n">GNDS_formatVersionModule</span>

<span class="kn">from</span> <span class="nn">LUPY</span> <span class="kn">import</span> <span class="n">ancestry</span> <span class="k">as</span> <span class="n">ancestryModule</span>
<span class="kn">from</span> <span class="nn">LUPY</span> <span class="kn">import</span> <span class="n">checksums</span> <span class="k">as</span> <span class="n">checksumsModule</span>
<span class="kn">from</span> <span class="nn">LUPY</span> <span class="kn">import</span> <span class="n">misc</span> <span class="k">as</span> <span class="n">LUPY_miscModule</span>

<span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">enums</span> <span class="k">as</span> <span class="n">enumsModule</span>
<span class="kn">from</span> <span class="nn">fudge.core.utilities</span> <span class="kn">import</span> <span class="n">guessInteraction</span> <span class="k">as</span> <span class="n">guessInteractionModule</span>
<span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">reactionSuite</span> <span class="k">as</span> <span class="n">reactionSuiteModule</span>

<div class="viewcode-block" id="FormatVersion"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.FormatVersion">[docs]</a><span class="k">class</span> <span class="nc">FormatVersion</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This class is only needed because some legacy map files (map files created before the map node was</span>
<span class="sd">    defined in **GNDS**) are still used at LLNL. When these map files are no longer used, this class</span>
<span class="sd">    will be removed. New map files should only be created with **GNDS** format &#39;2.0&#39;.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">version_0_1</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
    <span class="n">version_0_2</span> <span class="o">=</span> <span class="s2">&quot;0.2&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="p">(</span><span class="n">version_0_1</span><span class="p">,</span> <span class="n">version_0_2</span><span class="p">,</span> <span class="n">GNDS_formatVersionModule</span><span class="o">.</span><span class="n">version_1_10</span><span class="p">,</span> <span class="n">GNDS_formatVersionModule</span><span class="o">.</span><span class="n">version_2_0_LLNL_4</span><span class="p">,</span> <span class="n">GNDS_formatVersionModule</span><span class="o">.</span><span class="n">version_2_0</span><span class="p">)</span>
    <span class="n">default</span> <span class="o">=</span> <span class="n">GNDS_formatVersionModule</span><span class="o">.</span><span class="n">default</span>

<div class="viewcode-block" id="FormatVersion.check"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.FormatVersion.check">[docs]</a>    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="nb">format</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This methods should be used to check that the format of a map file is valid. Also, the returned value is the format</span>
<span class="sd">        that should be used after calling this method.</span>

<span class="sd">        :param format:  The format string to check.</span>

<span class="sd">        :return:        The format that should be used by other logic in this module.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">version_0_1</span> <span class="ow">or</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">version_0_2</span><span class="p">:</span>
            <span class="nb">format</span> <span class="o">=</span> <span class="n">GNDS_formatVersionModule</span><span class="o">.</span><span class="n">version_1_10</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">allowed</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Unsupported format &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="nb">format</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">format</span></div></div>

<div class="viewcode-block" id="Base"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Base">[docs]</a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span> <span class="n">ancestryModule</span><span class="o">.</span><span class="n">AncestryIO</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Base class used by all other map related classes. Mainly inherits class :py:class:`ancestryModule.AncestryIO`</span>
<span class="sd">    and adds the members **checksum** and **algorithm**.</span>

<span class="sd">    The following table list the primary members of this class:</span>

<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    | Member    | Description                                               |</span>
<span class="sd">    +===========+===========================================================+</span>
<span class="sd">    | checksum  | The check sum of the file referrence by the path member.  |</span>
<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    | algorithm | The algorithm used to calculate *checksum*.               |</span>
<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        :param checksum:        The check sum of the file referrence by the path member.</span>
<span class="sd">        :param algorithm:       The algorithm used to calculate *checksum*.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">ancestryModule</span><span class="o">.</span><span class="n">AncestryIO</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span> <span class="o">=</span> <span class="n">checksum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">algorithm</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">checksum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return checksum for this map entry.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__checksum</span>

    <span class="nd">@checksum</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">checksum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checksum_</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets *self*&#39;s checksum to checksum_.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">checksum_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">checksum_</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Checksum must be a string.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__checksum</span> <span class="o">=</span> <span class="n">checksum_</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">algorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the algorithm used to compute the checksum for this entry.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algorithm</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algorithm</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Map</span><span class="p">):</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span><span class="o">.</span><span class="n">algorithm</span>

    <span class="nd">@algorithm</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">algorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm_</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set *self*&#39;s algorithm to algorithm_.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">algorithm_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">algorithm_</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">checksumsModule</span><span class="o">.</span><span class="n">supportedAlgorithms</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsupported checksum algorithm &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">algorithm_</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__algorithm</span> <span class="o">=</span> <span class="n">algorithm_</span>

<div class="viewcode-block" id="Base.standardXML_attributes"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Base.standardXML_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">standardXML_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkAncestor</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the XML attribute string for *checksum* and *algorithm*. Mainly for internal use.</span>
<span class="sd">        If *checkAncestor* is **True** and *self*&#39;s *ancestor* uses the same *algorithm* as *self*, then</span>
<span class="sd">        the algorithm attribute string is **not** included in the returned string.</span>

<span class="sd">        :param checkAncestor:   Used to determine if *algorithm* needed to be added to attribute string.</span>

<span class="sd">        :return:                XML attribute string for *checksum* and *algorithm*.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span><span class="p">:</span>
            <span class="n">attrs</span> <span class="o">+=</span> <span class="s1">&#39; checksum=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span>

        <span class="n">algorithm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">checkAncestor</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span><span class="o">.</span><span class="n">algorithm</span><span class="p">:</span>
                <span class="n">algorithm</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">algorithm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attrs</span> <span class="o">+=</span> <span class="s1">&#39; algorithm=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">algorithm</span>
            
        <span class="k">return</span> <span class="n">attrs</span></div></div>

<div class="viewcode-block" id="Map"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map">[docs]</a><span class="k">class</span> <span class="nc">Map</span><span class="p">(</span> <span class="n">Base</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This class represents a **GNDS** **map** that is used to create a nuclear data library from a list </span>
<span class="sd">    of :py:class:`Protare` :py:class:`TNSL` and :py:class:`Import` instances. Each instance in the list</span>
<span class="sd">    is called an entry.</span>

<span class="sd">    The following table list the primary members of this class:</span>

<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | Member        | Description                                               |</span>
<span class="sd">    +===============+===========================================================+</span>
<span class="sd">    | library       | The name of the library.                                  |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | path          | The path to the map file read in.                         |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | parentsDir    | May be deprecated, needs more investigating.              |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | format        | The format version for the map read in.                   |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | checksum      | The check sum of the file referrence by the path member.  |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | algorithm     | The algorithm used to calculate *checksum*.               |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">moniker</span> <span class="o">=</span> <span class="s2">&quot;map&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">parentsDir</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span> <span class="o">=</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">checksum</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Constructor for **Map** class.</span>

<span class="sd">        :param library:         The name of the library.</span>
<span class="sd">        :param path:            The path to the map file that was used to construct *self*.</span>
<span class="sd">        :param parentsDir:      May be deprecated, needs more investigating.</span>
<span class="sd">        :param format:          The format version for the map file read in.</span>
<span class="sd">        :param checksum:        Hash for the map (computed from the concatenation of all checksums inside the map)</span>
<span class="sd">        :param algorithm:       Algorithm used to compute checksums.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">Base</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__library</span> <span class="o">=</span> <span class="n">LUPY_miscModule</span><span class="o">.</span><span class="n">isString</span><span class="p">(</span><span class="n">library</span><span class="p">,</span> <span class="s1">&#39;Library must be a string.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__path</span> <span class="o">=</span> <span class="n">LUPY_miscModule</span><span class="o">.</span><span class="n">isString</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;Path must be a string.&#39;</span><span class="p">)</span>
        <span class="n">parentsDir</span> <span class="o">=</span> <span class="n">LUPY_miscModule</span><span class="o">.</span><span class="n">isString</span><span class="p">(</span><span class="n">parentsDir</span><span class="p">,</span> <span class="s1">&#39;&#39;&#39;Parent&#39;s path must be a string.&#39;&#39;&#39;</span><span class="p">)</span>

        <span class="n">fileName</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fileName</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">parentsDir</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">fileName</span> <span class="o">=</span> <span class="n">parentsDir</span> <span class="o">/</span> <span class="n">fileName</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__format</span> <span class="o">=</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the (*index*-1)^th item of *self*.</span>

<span class="sd">        :param index:       The index of the iter to return.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterators over each entry in *self*. Does not dive into import entries.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span> <span class="k">yield</span> <span class="n">entry</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the number of entries in *self*. Does not dive into import entries.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the path this map was read from or may be written to. It may be absolote or relative, </span>
<span class="sd">        depending on how it was initialize.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__path</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns to format for *self*.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__format</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">library</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the library name for *self*.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__library</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fileName</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the file name for the location of *self*. Unlike the method :py:meth:`path`, </span>
<span class="sd">        this will always be the absolute path.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fileName</span> <span class="p">)</span>

<div class="viewcode-block" id="Map.updateAllChecksums"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.updateAllChecksums">[docs]</a>    <span class="k">def</span> <span class="nf">updateAllChecksums</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">checksumsModule</span><span class="o">.</span><span class="n">Sha1sum</span><span class="o">.</span><span class="n">algorithm</span><span class="p">,</span> <span class="n">mapDirectory</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calls *updateChecksum* on all entries and then updates *self*&#39;s *checksum*.&quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">threading</span>
        <span class="kn">from</span> <span class="nn">LUPY</span> <span class="kn">import</span> <span class="n">parallelprocessing</span>

        <span class="k">class</span> <span class="nc">computeSum</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>

            <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
                <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">entry</span>

            <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">updateChecksum</span><span class="p">(</span><span class="n">algorithm</span><span class="p">,</span> <span class="n">mapDirectory</span><span class="o">=</span><span class="n">mapDirectory</span><span class="p">)</span>

        <span class="n">entries</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">parallelprocessing</span><span class="o">.</span><span class="n">executeMultiThreaded</span><span class="p">(</span><span class="n">entries</span><span class="p">,</span> <span class="n">runner</span><span class="o">=</span><span class="n">computeSum</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updateChecksum</span><span class="p">(</span><span class="n">algorithm</span><span class="p">)</span></div>

<div class="viewcode-block" id="Map.updateChecksum"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.updateChecksum">[docs]</a>    <span class="k">def</span> <span class="nf">updateChecksum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">checksumsModule</span><span class="o">.</span><span class="n">Sha1sum</span><span class="o">.</span><span class="n">algorithm</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Computes map file checksum by concatenating checksums for all entries of *self* into a string and compute the </span>
<span class="sd">        checksum of that string.</span>

<span class="sd">        :param algorithm:           The algorithm to use to calculate the checksum.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">checker</span> <span class="o">=</span> <span class="n">checksumsModule</span><span class="o">.</span><span class="n">checkers</span><span class="p">[</span><span class="n">algorithm</span><span class="p">]</span>  <span class="c1"># Caleb, I think checker and checkers should be called algorithm and algorithms.</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">entry</span><span class="o">.</span><span class="n">checksum</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">checksum</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">algorithm</span></div>

<div class="viewcode-block" id="Map.append"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">entry</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Appends *entry* to *self*.&#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">EntryBase</span><span class="p">):</span>
            <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid entry.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">entry</span> <span class="p">)</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">setAncestor</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.insert"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Inserts the entry into *self* at index.&#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">EntryBase</span><span class="p">):</span>
            <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid entry of type &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">setAncestor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Map.iterate"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.iterate">[docs]</a>    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Iterates over all protares and TNSLs in *self* including those in import entries. </span>
<span class="sd">        Ergo, unlike :py:class:`__getitem__`, this method dives into import entries.</span>
<span class="sd">        That is, no :py:class:`Import` instances is returned.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">entry</span><span class="p">,</span> <span class="n">Import</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">yield from</span> <span class="n">entry</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">yield</span> <span class="n">entry</span></div>

<div class="viewcode-block" id="Map.find"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the first entry matching *projectile*, *target*, *library* and *evaluation*. </span>
<span class="sd">        Searches each entry in the order they were appended and dives into imported maps.</span>
<span class="sd">        If *library* is **None**, then all libraries are treated as matched.</span>
<span class="sd">        If *evaluation* is **None**, then all evaluations are treated as matched.</span>

<span class="sd">        :param projectile:      The **GNDS** **PoPs** id for the projectile to match.</span>
<span class="sd">        :param target:          The **GNDS** **PoPs** id for the target to match.</span>
<span class="sd">        :param library:         The name of the library to match.</span>
<span class="sd">        :param evaluation:      The name of the evaluation to match.</span>

<span class="sd">        :return:            Returns the found entry or **None** is no match was found.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">entry</span><span class="p">,</span> <span class="n">Import</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">foundEntry</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">foundEntry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="n">foundEntry</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">entry</span><span class="o">.</span><span class="n">isMatch</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="n">entry</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="kc">None</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.findAllOf"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.findAllOf">[docs]</a>    <span class="k">def</span> <span class="nf">findAllOf</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all entries matching *projectile*, *target*, *library* and *evaluation*. Searches </span>
<span class="sd">        all imported maps. If *library* is **None**, the all libraries are treated as matched.</span>
<span class="sd">        If *evaluation* is **None**, the all evaluations are treated as matched.</span>

<span class="sd">        :param projectile:      The **GNDS** **PoPs** id for the projectile to match.</span>
<span class="sd">        :param target:          The **GNDS** **PoPs** id for the target to match.</span>
<span class="sd">        :param library:         The name of the library to match.</span>
<span class="sd">        :param evaluation:      The name of the evaluation to match.</span>

<span class="sd">        :return:                Returns the list of all entries that match the input arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">allFound</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">entry</span><span class="p">,</span> <span class="n">Import</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">allFound</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="n">findAllOf</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">entry</span><span class="o">.</span><span class="n">isMatch</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">allFound</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">entry</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">allFound</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.unrecurseAndSave"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.unrecurseAndSave">[docs]</a>    <span class="k">def</span> <span class="nf">unrecurseAndSave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newFileName</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterate through all entries recursively and save as a flattened map files to file *newFileName*.</span>
<span class="sd">        Ergo, produces a similar :py:class:`Map` instance but with no import entries.</span>

<span class="sd">        :param newFileName:  New filename to which flattened mapfile will be saved.</span>

<span class="sd">        :return:            Returns the flattened :py:class:`Map` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">newInstance</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">library</span><span class="p">,</span> <span class="n">newFileName</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="n">pathList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterate</span><span class="p">():</span>
            <span class="n">entry</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pathList</span><span class="p">:</span>
                <span class="n">newInstance</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
                <span class="n">pathList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Duplicate (</span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">projectile</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">target</span><span class="si">}</span><span class="s1">) entry in map file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span> 

        <span class="n">newInstance</span><span class="o">.</span><span class="n">updateChecksum</span><span class="p">()</span>
        <span class="n">newInstance</span><span class="o">.</span><span class="n">saveToFile</span><span class="p">(</span><span class="n">newFileName</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">newInstance</span></div>

<div class="viewcode-block" id="Map.toXML_strList"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.toXML_strList">[docs]</a>    <span class="k">def</span> <span class="nf">toXML_strList</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of str instances representing the XML lines of *self*.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                List of str instances representing the XML lines of *self*.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">indent2</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;incrementalIndent&#39;</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span><span class="p">)</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;formatVersion&#39;</span><span class="p">,</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span><span class="p">)))</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span> <span class="kc">False</span> <span class="p">)</span>

        <span class="n">XML_list</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s</span><span class="s1"> library=&quot;</span><span class="si">%s</span><span class="s1">&quot; format=&quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">library</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">attrs</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span> <span class="n">XML_list</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="n">toXML_strList</span><span class="p">(</span> <span class="n">indent2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span>
        <span class="n">XML_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span>  <span class="s1">&#39;&lt;/</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">XML_list</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.parseNodeUsingClass"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.parseNodeUsingClass">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">parseNodeUsingClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">xPath</span><span class="p">,</span> <span class="n">linkData</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Map instance from an map node.</span>

<span class="sd">        :param node:        Node to parse.</span>
<span class="sd">        :param xPath:       Currently not used.</span>
<span class="sd">        :param linkData:    Currently not used.</span>
<span class="sd">        :param kwargs:      A keyword list.</span>

<span class="sd">        :return:            :py:class:`Map` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">Map</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s1">&#39;Invalid node name &quot;</span><span class="si">%s</span><span class="s1">&quot; for a map file.&#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="p">)</span>

        <span class="n">sourcePath</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sourcePath&#39;</span><span class="p">]</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s2">&quot;Map node does not have &#39;format&#39; attribute.&quot;</span> <span class="p">)</span>

        <span class="n">library</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;library&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">library</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s2">&quot;Map node does not have &#39;library&#39; attribute.&quot;</span> <span class="p">)</span>

        <span class="nb">map</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">library</span><span class="p">,</span> <span class="n">sourcePath</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;checksum&#39;</span><span class="p">),</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;algorithm&#39;</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)</span>

        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span> <span class="p">:</span>
            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">Import</span><span class="o">.</span><span class="n">moniker</span><span class="p">:</span>
                <span class="nb">map</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Import</span><span class="o">.</span><span class="n">parseNodeUsingClass</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">xPath</span><span class="p">,</span> <span class="n">linkData</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">Protare</span><span class="o">.</span><span class="n">moniker</span><span class="p">:</span>
                <span class="nb">map</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Protare</span><span class="o">.</span><span class="n">parseNodeUsingClass</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">xPath</span><span class="p">,</span> <span class="n">linkData</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">TNSL</span><span class="o">.</span><span class="n">moniker</span><span class="p">:</span>
                <span class="nb">map</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TNSL</span><span class="o">.</span><span class="n">parseNodeUsingClass</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">xPath</span><span class="p">,</span> <span class="n">linkData</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s2">&quot;Invalid child tag &#39;</span><span class="si">%s</span><span class="s2">&#39; for map file.&quot;</span> <span class="o">%</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="p">)</span>

        <span class="k">return</span> <span class="nb">map</span></div>

<div class="viewcode-block" id="Map.read"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.read">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads in the file name *fileName* and returns a **Map** instance.</span>

<span class="sd">        :param fileName:    The file to read in and parse.</span>
<span class="sd">        :param kwargs:      A keyword list.</span>

<span class="sd">        :return:            :py:class:`Map` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Map</span><span class="o">.</span><span class="n">readXML_file</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="EntryBase"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.EntryBase">[docs]</a><span class="k">class</span> <span class="nc">EntryBase</span><span class="p">(</span> <span class="n">Base</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Base class for all map entry classes.</span>

<span class="sd">    The following table list the primary members of this class:</span>

<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    | Member    | Description                                               |</span>
<span class="sd">    +===========+===========================================================+</span>
<span class="sd">    | path      | The file path to the file to read in for this entry.      |</span>
<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    | checksum  | The check sum of the file referrence by the path member.  |</span>
<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    | algorithm | The algorithm used to calculate *checksum*.               |</span>
<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Base constructor for map entries.</span>

<span class="sd">        :param path:            Path attribute for the entry.</span>
<span class="sd">        :param checksum:        Checksum for this entry, computed using the indicated algorithm.</span>
<span class="sd">        :param algorithm:       Algorithm for computing the checksum. Only required if different from parent &lt;map&gt; file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">Base</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fileName</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the file name for the location of *self*. Unlike the method :py:meth:`path`, </span>
<span class="sd">        this will always be the absolute path.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">fileName</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fileName</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span><span class="o">.</span><span class="n">fileName</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">fileName</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the value of the *__path* member. This may be absolute or relative.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__path</span> <span class="p">)</span>

    <span class="nd">@path</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Sets member *self*.__path to *path*.</span>

<span class="sd">        :param path:    The name of the path for *self*.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Path must be a string.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__path</span> <span class="o">=</span> <span class="n">path</span>

<div class="viewcode-block" id="EntryBase.buildFileName"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.EntryBase.buildFileName">[docs]</a>    <span class="k">def</span> <span class="nf">buildFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapDirectory</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This method is designed to aid in building a map file when the map file does not reside in its final resting place.</span>
<span class="sd">        The value of *mapDirectory* should be the final resting place (i.e., directory) of the map file.</span>
<span class="sd">        Otherwise, this method is the same as the propery methods *fileName*.</span>

<span class="sd">        :param mapDirectory:    The final directory where the map file will reside if it is different than &quot;./&quot;.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">mapDirectory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span>

        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">mapDirectory</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="EntryBase.updateChecksum"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.EntryBase.updateChecksum">[docs]</a>    <span class="k">def</span> <span class="nf">updateChecksum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">checksumsModule</span><span class="o">.</span><span class="n">Sha1sum</span><span class="o">.</span><span class="n">algorithm</span><span class="p">,</span> <span class="n">mapDirectory</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the checksum of the file specified by *path* member and store it into the *checksum* member.</span>

<span class="sd">        @param algorithm:       The algorithm to use for the checksum.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">algorithm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span> <span class="o">=</span> <span class="n">checksumsModule</span><span class="o">.</span><span class="n">checkers</span><span class="p">[</span><span class="n">algorithm</span><span class="p">]</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buildFileName</span><span class="p">(</span><span class="n">mapDirectory</span><span class="p">))</span></div></div>

<div class="viewcode-block" id="Import"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import">[docs]</a><span class="k">class</span> <span class="nc">Import</span><span class="p">(</span> <span class="n">EntryBase</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Class representing an &#39;import&#39; entry in a map. An import entry specifies the location of another map file to import.</span>

<span class="sd">    The following table list the primary members of this class:</span>

<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    | Member    | Description                                               |</span>
<span class="sd">    +===========+===========================================================+</span>
<span class="sd">    | path      | The file path to the map file in for this entry.          |</span>
<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    | checksum  | The check sum of the file referrence by the path member.  |</span>
<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    | algorithm | The algorithm used to calculate *checksum*.               |</span>
<span class="sd">    +-----------+-----------------------------------------------------------+</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">moniker</span> <span class="o">=</span> <span class="s2">&quot;import&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructor for the import entry.</span>

<span class="sd">        :param path:            Path to the map file in import.</span>
<span class="sd">        :param checksum:        Checksum for this entry, computed using the indicated algorithm.</span>
<span class="sd">        :param algorithm:       Algorithm for computing the checksum. Only required if different from parent &lt;map&gt; file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">EntryBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__map</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a simple string representation of *self*.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> with path &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">derivedPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the parent part of the ancestor&#39;s path. This, together with *self*&#39;s path defines the</span>
<span class="sd">        location of the map file to read in.</span>

<span class="sd">        :return:        The parent part of the ancestor&#39;s path.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">ancestor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ancestor</span><span class="p">,</span> <span class="n">Map</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">ancestor</span><span class="o">.</span><span class="n">fileName</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>

        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Import not an entry of a Map instance.&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">map</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a reference to *self*.__map.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readMap</span><span class="p">(</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span> <span class="p">)</span>

<div class="viewcode-block" id="Import.find"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls :py:meth:`Map.find` on *self*.__map and returns its results.</span>

<span class="sd">        :param projectile:      The name of the projectile to match.</span>
<span class="sd">        :param target:          The name of the projectile to match.</span>
<span class="sd">        :param library:         The name of the library to match.</span>
<span class="sd">        :param evaluation:      The name of the evaluation to match.</span>

<span class="sd">        :return:                Returns the found entry or **None** is no match was found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readMap</span><span class="p">(</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span><span class="o">.</span><span class="n">find</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Import.findAllOf"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.findAllOf">[docs]</a>    <span class="k">def</span> <span class="nf">findAllOf</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls :py:meth:`Map.findAllOf` on *self*.__map and returns its results.</span>
<span class="sd">        Arguments that are **None** match all values of their type. For example, if *projectile* is **None**,</span>
<span class="sd">        then all projectiles are a match.</span>

<span class="sd">        :param projectile:      The name of the projectile to match.</span>
<span class="sd">        :param target:          The name of the projectile to match.</span>
<span class="sd">        :param library:         The name of the library to match.</span>
<span class="sd">        :param evaluation:      The name of the evaluation to match.</span>

<span class="sd">        :return:                Returns the list of all matches found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readMap</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span><span class="o">.</span><span class="n">findAllOf</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Import.iterate"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.iterate">[docs]</a>    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Iterates over all protares and TNSLs in *self*&#39;s map including nested :py:class:`Map` instances.</span>
<span class="sd">        No :py:class:`Import` instances is returned.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readMap</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Import.readMap"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.readMap">[docs]</a>    <span class="k">def</span> <span class="nf">readMap</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reads in the map file pointed to by *self* if not already read in. An import only reads its map file when needed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mapFilePath</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">mapFilePath</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
                <span class="n">mapFilePath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">derivedPath</span> <span class="o">/</span> <span class="n">mapFilePath</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__map</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="n">readXML_file</span><span class="p">(</span><span class="n">mapFilePath</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__map</span><span class="o">.</span><span class="n">setAncestor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span></div>
    
<div class="viewcode-block" id="Import.toXML_strList"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.toXML_strList">[docs]</a>    <span class="k">def</span> <span class="nf">toXML_strList</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of str instances representing the XML lines of *self*.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                List of str instances representing the XML lines of *self*.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s</span><span class="s1"> path=&quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="si">%s</span><span class="s1">/&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">attrs</span> <span class="p">)</span> <span class="p">]</span></div>

<div class="viewcode-block" id="Import.parseNodeUsingClass"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.parseNodeUsingClass">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">parseNodeUsingClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">xPath</span><span class="p">,</span> <span class="n">linkData</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an :py:class:`Import` instance from an import node.</span>

<span class="sd">        :param node:            Node to parse.</span>
<span class="sd">        :param xPath:           Currently not used.</span>
<span class="sd">        :param linkData:        Currently not used.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                :py:class:`Import` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">Import</span><span class="o">.</span><span class="n">moniker</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Invalid node name.&quot;</span> <span class="p">)</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;checksum&#39;</span><span class="p">,</span> <span class="s1">&#39;algorithm&#39;</span><span class="p">)}</span>
        <span class="n">_import</span> <span class="o">=</span> <span class="n">Import</span><span class="p">(</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">_import</span></div></div>

<div class="viewcode-block" id="ProtareBase"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase">[docs]</a><span class="k">class</span> <span class="nc">ProtareBase</span><span class="p">(</span> <span class="n">EntryBase</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Base class for all protare-like entry classes (i.e., the :py:class:`Protare` and :py:class:`TNSL` classes).</span>

<span class="sd">    The following table list the primary members of this class:</span>

<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | Member        | Description                                               |</span>
<span class="sd">    +===============+===========================================================+</span>
<span class="sd">    | projectile    | The name of the projectile.                               |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | target        | The name of the target.                                   |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | evaluation    | The name of the evaluation.                               |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | interaction   | The type of interacter for the protare.                   |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | path          | The file path to the file to read in for this entry.      |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | checksum      | The check sum of the file referrence by the path member.  |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | algorithm     | The algorithm used to calculate *checksum*.               |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">interaction</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construtor for ProtareBase instance.</span>

<span class="sd">        :param projectile:          Name for the projectile.</span>
<span class="sd">        :param target:              Name for the target.</span>
<span class="sd">        :param evaluation:          Name for the protare&#39;s Evaluation.</span>
<span class="sd">        :param path:                Path to the protare file.</span>
<span class="sd">        :param interaction:         Type of interaction for the data in the protare file (see class reactionSuite.Interaction).</span>
<span class="sd">        :param checksum:            Checksum for this entry, computed using the indicated algorithm.</span>
<span class="sd">        :param algorithm:           Algorithm for computing the checksum. Only required if different from parent &lt;map&gt; file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">EntryBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Projectile must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__projectile</span> <span class="o">=</span> <span class="n">projectile</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">target</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Target must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__target</span> <span class="o">=</span> <span class="n">target</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">evaluation</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Evaluation must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">TNSL</span><span class="p">):</span>
            <span class="n">interaction</span> <span class="o">=</span> <span class="kc">None</span>                      <span class="c1"># In GNDS 2.0, TNSL no longer as interaction attribution as it is not needed.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">interaction</span> <span class="o">=</span> <span class="n">enumsModule</span><span class="o">.</span><span class="n">Interaction</span><span class="o">.</span><span class="n">checkEnumOrString</span><span class="p">(</span><span class="n">interaction</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__interaction</span> <span class="o">=</span> <span class="n">interaction</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__guessedInteraction</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">projectile</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the projectile&#39;s name.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__projectile</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the target&#39;s name.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__target</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">evaluation</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the evaluation string.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__evaluation</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">interaction</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the interaction attribute.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__interaction</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">guessedInteraction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the guessedInteraction value. This is for pre GNDS 2.0 use only and should not be used with GNDS 2.0 or higher</span>
<span class="sd">        (i.e., it should always return **False** for GNDS 2.0 or higher).</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__guessedInteraction</span>

    <span class="nd">@guessedInteraction</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">guessedInteraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Set *self*&#39;s guessedInteraction member. This is for pre GNDS 2.0 use only and should not be </span>
<span class="sd">        used with GNDS 2.0 or higher.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__guessedInteraction</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">library</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name of the library the protare resides in.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span><span class="o">.</span><span class="n">library</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">derivedPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the location of the file pointed to by the *path* member relative to the ancestor&#39;s locations.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">ancestor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ancestor</span><span class="p">,</span> <span class="n">Base</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">ancestor</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

<div class="viewcode-block" id="ProtareBase.isMatch"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.isMatch">[docs]</a>    <span class="k">def</span> <span class="nf">isMatch</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns **True** is *self* matches projectile, target, library and evaluation, and **False** otherwise.</span>
<span class="sd">        If an argument has a value of **None**, that argument is a match.  </span>
<span class="sd">        For example, isMatch( None, &quot;O16&quot;, None, None ) will match any entry with a target of &quot;O16&quot;.</span>

<span class="sd">        :param projectile:      The requested projectile&#39;s **PoPs** id to check for match.</span>
<span class="sd">        :param target:          The requested target&#39;s **PoPs** id to check for match.</span>
<span class="sd">        :param library:         The requested library to check for match.</span>
<span class="sd">        :param evaluation:      The requested evaluation to check for match.</span>

<span class="sd">        :return:                Returns **True** if a match and **False** otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptable</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectile</span><span class="p">,</span> <span class="n">projectile</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptable</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">target</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptable</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">library</span><span class="p">,</span> <span class="n">library</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptable</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__evaluation</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="kc">False</span> <span class="p">)</span></div>

<div class="viewcode-block" id="ProtareBase.protare"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.protare">[docs]</a>    <span class="k">def</span> <span class="nf">protare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">lazyParsing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calls *self*.read. This method is deprecated.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="n">verbosity</span><span class="p">,</span> <span class="n">lazyParsing</span><span class="o">=</span><span class="n">lazyParsing</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProtareBase.read"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">lazyParsing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads in the protare using the **read** function in the module ReactionSuite.py and returns the instance.</span>

<span class="sd">        :param verbosity:       Passed onto ReactionSuite.read.</span>
<span class="sd">        :param lazyParsing:     Passed onto ReactionSuite.read.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">reactionSuiteModule</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fileName</span><span class="p">,</span> <span class="n">verbosity</span><span class="o">=</span><span class="n">verbosity</span><span class="p">,</span> <span class="n">lazyParsing</span><span class="o">=</span><span class="n">lazyParsing</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProtareBase.standardXML_attributes"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.standardXML_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">standardXML_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkAncestor</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the XML attribute string for protare, target, evalution and interaction as well that those</span>
<span class="sd">        returned by :py:meth:`Base.standardXML_attributes`.</span>

<span class="sd">        :param checkAncestor:   Passed to the method :py:meth:`Base.standardXML_attributes`.</span>

<span class="sd">        :returns:               A XML attribute string.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">attributeString</span> <span class="o">=</span> <span class="s1">&#39; projectile=&quot;</span><span class="si">%s</span><span class="s1">&quot; target=&quot;</span><span class="si">%s</span><span class="s1">&quot; evaluation=&quot;</span><span class="si">%s</span><span class="s1">&quot; path=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projectile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">guessedInteraction</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">attributeString</span> <span class="o">+=</span> <span class="s1">&#39; interaction=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction</span>

        <span class="k">return</span> <span class="n">attributeString</span> <span class="o">+</span> <span class="n">Base</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkAncestor</span><span class="o">=</span><span class="n">checkAncestor</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProtareBase.adaptable"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.adaptable">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">adaptable</span><span class="p">(</span> <span class="n">item1</span><span class="p">,</span> <span class="n">item2</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns **True** whenever item2 is **None** or *item1* and *item2* are the same. For internal use.</span>

<span class="sd">        :param item1:       Item to compare to item2.</span>
<span class="sd">        :param item2:       Item to compare to item1.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">item2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="kc">True</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">item2</span><span class="p">,</span> <span class="n">item1</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div></div>
    
<div class="viewcode-block" id="Protare"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Protare">[docs]</a><span class="k">class</span> <span class="nc">Protare</span><span class="p">(</span> <span class="n">ProtareBase</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    The class for a map&#39;s protare child node.</span>

<span class="sd">    The following table list the primary members of this class:</span>

<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | Member        | Description                                               |</span>
<span class="sd">    +===============+===========================================================+</span>
<span class="sd">    | projectile    | The name of the projectile.                               |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | target        | The name of the target.                                   |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | evaluation    | The name of the evaluation.                               |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | interaction   | The type of interacter for the protare.                   |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | path          | The file path to the file to read in for this entry.      |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | checksum      | The check sum of the file referrence by the path member.  |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    | algorithm     | The algorithm used to calculate *checksum*.               |</span>
<span class="sd">    +---------------+-----------------------------------------------------------+</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">moniker</span> <span class="o">=</span> <span class="s2">&quot;protare&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">interaction</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construtor for a Protare instance.</span>

<span class="sd">        :param projectile:          Name for the projectile.</span>
<span class="sd">        :param target:              Name for the target.</span>
<span class="sd">        :param evaluation:          Name for the protare&#39;s Evaluation.</span>
<span class="sd">        :param path:                Path to the protare file.</span>
<span class="sd">        :param interaction:         Type of interaction for the data in the protare file (see class reactionSuite.Interaction).</span>
<span class="sd">        :param checksum:            Checksum for this entry, computed using the indicated algorithm.</span>
<span class="sd">        :param algorithm:           Algorithm for computing the checksum. Only required if different from parent &lt;map&gt; file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ProtareBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">interaction</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a simple string representation of *self*.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> with projectile &quot;</span><span class="si">%s</span><span class="s1">&quot;, target &quot;</span><span class="si">%s</span><span class="s1">&quot;, evaluation &quot;</span><span class="si">%s</span><span class="s1">&quot;, path &quot;</span><span class="si">%s</span><span class="s1">&quot; and interaction &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> 
            <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction</span> <span class="p">)</span> <span class="p">)</span>

<div class="viewcode-block" id="Protare.toXML_strList"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Protare.toXML_strList">[docs]</a>    <span class="k">def</span> <span class="nf">toXML_strList</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of str instances representing the XML lines of *self*.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                List of str instances representing the XML lines of *self*.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;formatVersion&#39;</span><span class="p">,</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span><span class="p">)))</span>

        <span class="k">return</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s%s</span><span class="s1">/&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="p">]</span></div>

<div class="viewcode-block" id="Protare.parseNodeUsingClass"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Protare.parseNodeUsingClass">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">parseNodeUsingClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">xPath</span><span class="p">,</span> <span class="n">linkData</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Protare instance from a protare node.</span>

<span class="sd">        :param node:        Node to parse.</span>
<span class="sd">        :param xPath:       Currently not used.</span>
<span class="sd">        :param linkData:    Currently not used.</span>
<span class="sd">        :param kwargs:      A keyword list.</span>

<span class="sd">        :return:            A :py:class:`Protare` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">Protare</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Invalid node name.&quot;</span> <span class="p">)</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span>
                  <span class="p">(</span><span class="s1">&#39;projectile&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;evaluation&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;interaction&#39;</span><span class="p">,</span> <span class="s1">&#39;checksum&#39;</span><span class="p">,</span> <span class="s1">&#39;algorithm&#39;</span><span class="p">)}</span>

        <span class="n">guessedInteraction</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;interaction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">guessInteractionModule</span><span class="o">.</span><span class="n">guessInteraction</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;interaction&#39;</span><span class="p">],</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;projectile&#39;</span><span class="p">],</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">])</span>

        <span class="n">protare</span> <span class="o">=</span> <span class="n">Protare</span><span class="p">(</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span>

        <span class="n">protare</span><span class="o">.</span><span class="n">guessedInteraction</span> <span class="o">=</span> <span class="n">guessedInteraction</span>

        <span class="k">return</span> <span class="n">protare</span></div></div>

<div class="viewcode-block" id="TNSL"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.TNSL">[docs]</a><span class="k">class</span> <span class="nc">TNSL</span><span class="p">(</span> <span class="n">ProtareBase</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    The class for a map&#39;s TNSL node.</span>

<span class="sd">    The following table list the primary members of this class:</span>

<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    | Member                | Description                                               |</span>
<span class="sd">    +=======================+===========================================================+</span>
<span class="sd">    | projectile            | The name of the projectile.                               |</span>
<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    | target                | The name of the target.                                   |</span>
<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    | evaluation            | The name of the evaluation.                               |</span>
<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    | path                  | The file path to the file to read in for this entry.      |</span>
<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    | standardTarget        | Name for the standard target.                             |</span>
<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    | standardEvaluation    | Name for the standard evaluation.                         |</span>
<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    | checksum              | The check sum of the file referrence by the path member.  |</span>
<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    | algorithm             | The algorithm used to calculate *checksum*.               |</span>
<span class="sd">    +-----------------------+-----------------------------------------------------------+</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">moniker</span> <span class="o">=</span> <span class="s2">&quot;TNSL&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">standardTarget</span><span class="p">,</span> <span class="n">standardEvaluation</span><span class="p">,</span> 
                <span class="n">interaction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construtor for a TNSL instance.</span>

<span class="sd">        :param projectile:              Name for the projectile.</span>
<span class="sd">        :param target:                  Name id for the target.</span>
<span class="sd">        :param evaluation:              Evaluation for the protare.</span>
<span class="sd">        :param path:                    Path to the protare file.</span>
<span class="sd">        :param standardTarget:          Name for the standard target.</span>
<span class="sd">        :param standardEvaluation:      Name for the standard evaluation.</span>
<span class="sd">        :param checksum:                Checksum for this entry, computed using the indicated algorithm.</span>
<span class="sd">        :param algorithm:               Algorithm for computing the checksum. Only required if different from parent &lt;map&gt; file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ProtareBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">standardTarget</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Standard target must be a string.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__standardTarget</span> <span class="o">=</span> <span class="n">standardTarget</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">standardEvaluation</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Standard evaluation must be a string, is of type &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="n">standardEvaluation</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__standardEvaluation</span> <span class="o">=</span> <span class="n">standardEvaluation</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a simple string representation of *self*.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> with projectile &quot;</span><span class="si">%s</span><span class="s1">&quot;, target &quot;</span><span class="si">%s</span><span class="s1">&quot;, evaluation &quot;</span><span class="si">%s</span><span class="s1">&quot;, path &quot;</span><span class="si">%s</span><span class="s1">&quot;, standardTarget &quot;</span><span class="si">%s</span><span class="s1">&quot; and standardEvaluation &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> 
            <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardTarget</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardEvaluation</span> <span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">standardTarget</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the standardTarget.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__standardTarget</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">standardEvaluation</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the standardEvaluation.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__standardEvaluation</span> <span class="p">)</span>

<div class="viewcode-block" id="TNSL.toXML_strList"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.TNSL.toXML_strList">[docs]</a>    <span class="k">def</span> <span class="nf">toXML_strList</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of str instances representing the XML lines of *self*.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                List of str instances representing the XML lines of *self*.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;formatVersion&#39;</span><span class="p">,</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span><span class="p">)))</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">version_0_1</span> <span class="ow">or</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">GNDS_formatVersionModule</span><span class="o">.</span><span class="n">version_1_10</span><span class="p">:</span>
            <span class="n">indent2</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;incrementalIndent&#39;</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span> <span class="p">)</span>
            <span class="n">XML_list</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="n">attrs</span> <span class="p">)</span> <span class="p">]</span>
            <span class="n">XML_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;protare projectile=&quot;n&quot; target=&quot;</span><span class="si">%s</span><span class="s1">&quot; evaluation=&quot;</span><span class="si">%s</span><span class="s1">&quot;/&gt;&lt;/</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> 
                    <span class="p">(</span> <span class="n">indent2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardTarget</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardEvaluation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">XML_list</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s%s</span><span class="s1"> standardTarget=&quot;</span><span class="si">%s</span><span class="s1">&quot; standardEvaluation=&quot;</span><span class="si">%s</span><span class="s1">&quot;/&gt;&#39;</span> <span class="o">%</span>
                    <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardTarget</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardEvaluation</span> <span class="p">)</span> <span class="p">]</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">XML_list</span> <span class="p">)</span></div>

<div class="viewcode-block" id="TNSL.parseNodeUsingClass"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.TNSL.parseNodeUsingClass">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">parseNodeUsingClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">xPath</span><span class="p">,</span> <span class="n">linkData</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates a TNSL instance from a TNSL node.</span>

<span class="sd">        :param node:            Node to parse.</span>
<span class="sd">        :param xPath:           Current not used.</span>
<span class="sd">        :param linkData:        Currently not used.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                A :py:class:`TNSL` instance.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">TNSL</span><span class="o">.</span><span class="n">moniker</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Invalid node name.&#39;</span><span class="p">)</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;formatVersion&#39;</span><span class="p">,</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span><span class="p">)))</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span>
                  <span class="p">(</span><span class="s1">&#39;projectile&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;evaluation&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;checksum&#39;</span><span class="p">,</span> <span class="s1">&#39;algorithm&#39;</span><span class="p">)}</span>

        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">version_0_1</span> <span class="ow">or</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">GNDS_formatVersionModule</span><span class="o">.</span><span class="n">version_1_10</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;standardTarget&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;standardEvaluation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;evaluation&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;standardTarget&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;standardTarget&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;standardEvaluation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;standardEvaluation&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">TNSL</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="read"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.read">[docs]</a><span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads in the file named *fileName* and returns a :py:class:`Map` instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">Map</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/gnd.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Fudge and GNDS 6.1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">fudge.map</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012, B.Beck, D. Brown, C. Mattoon, N. Patel, N. Summers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
    </div>
  </body>
</html>