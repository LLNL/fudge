
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fudge.map &#8212; Fudge and GNDS 5.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../../_static/gnd-20121206-favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Fudge and GNDS 5.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">fudge.map</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for fudge.map</h1><div class="highlight"><pre>
<span></span><span class="c1"># &lt;&lt;BEGIN-copyright&gt;&gt;</span>
<span class="c1"># &lt;&lt;END-copyright&gt;&gt;</span>

<span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">This module contains classes for dealing with a map file. A map file creates a library from a list of GNDS files.</span>

<span class="s2">Example of expected usage:</span>

<span class="s2">    from fudge import map as mapModule</span>
<span class="s2">    file = &#39;/path/to/GIDI/Test/Data/MG_MC/all_maps.map&#39;</span>
<span class="s2">    map = mapModule.Map.readXML( file )                 # Read in a map file.</span>
<span class="s2">    m_O16 = map.find( &#39;n&#39;, &#39;O16&#39; )                      # This gets a reference to a map Protare instance.</span>
<span class="s2">    O16 = m_O16.protare( )                              # The creates a FUDGE protare (i.e., reactionSuite instance).</span>

<span class="s2">Note, in general, most user should get a protare this way.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">__todo</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    -) Need to make Base and some other class a meta class.</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">xData</span> <span class="kn">import</span> <span class="n">formatVersion</span> <span class="k">as</span> <span class="n">formatVersionModule</span>
<span class="kn">from</span> <span class="nn">xData</span> <span class="kn">import</span> <span class="n">ancestry</span> <span class="k">as</span> <span class="n">ancestryModule</span>

<span class="kn">from</span> <span class="nn">LUPY</span> <span class="kn">import</span> <span class="n">checksums</span> <span class="k">as</span> <span class="n">checksumsModule</span>
<span class="kn">from</span> <span class="nn">fudge.core.utilities</span> <span class="kn">import</span> <span class="n">guessInteraction</span> <span class="k">as</span> <span class="n">guessInteractionModule</span>
<span class="kn">from</span> <span class="nn">fudge</span> <span class="kn">import</span> <span class="n">reactionSuite</span> <span class="k">as</span> <span class="n">reactionSuiteModule</span>

<div class="viewcode-block" id="FormatVersion"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.FormatVersion">[docs]</a><span class="k">class</span> <span class="nc">FormatVersion</span> <span class="p">:</span>

    <span class="n">version_0_1</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
    <span class="n">version_0_2</span> <span class="o">=</span> <span class="s2">&quot;0.2&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="p">(</span> <span class="n">version_0_1</span><span class="p">,</span> <span class="n">version_0_2</span><span class="p">,</span> <span class="n">formatVersionModule</span><span class="o">.</span><span class="n">version_2_0_LLNL_4</span> <span class="p">)</span>
    <span class="n">default</span> <span class="o">=</span> <span class="n">version_0_1</span></div>

<div class="viewcode-block" id="Base"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Base">[docs]</a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span> <span class="n">ancestryModule</span><span class="o">.</span><span class="n">ancestry</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Base class used by all other map related classes. Mainly inherits class ancestryModule.ancestry and defines toXML.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span> <span class="o">=</span> <span class="n">checksum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">algorithm</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">checksum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return checksum for this map entry.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__checksum</span>

    <span class="nd">@checksum</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">checksum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checksum_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets self&#39;s checksum to checksum_.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">checksum_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">checksum_</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Checksum must be a string.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__checksum</span> <span class="o">=</span> <span class="n">checksum_</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">algorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the algorithm used to compute the checksum for this entry.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algorithm</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algorithm</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Map</span><span class="p">):</span> <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span><span class="o">.</span><span class="n">algorithm</span>

    <span class="nd">@algorithm</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">algorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set self&#39;s algorithm to algorithm_.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">algorithm_</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">algorithm_</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">checksumsModule</span><span class="o">.</span><span class="n">supportedAlgorithms</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsupported checksum algorithm &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">algorithm_</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__algorithm</span> <span class="o">=</span> <span class="n">algorithm_</span>

<div class="viewcode-block" id="Base.toXML"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Base.toXML">[docs]</a>    <span class="k">def</span> <span class="nf">toXML</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an XML string of self.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list passed to self&#39;s toXML_list method.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">toXML_list</span><span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span></div>
        
<div class="viewcode-block" id="Base.saveToOpenedFile"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Base.saveToOpenedFile">[docs]</a>    <span class="k">def</span> <span class="nf">saveToOpenedFile</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">fOut</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the contents of self to an already opened python file object (e.g., one returned by the open function).</span>

<span class="sd">        :param fOut:            A python file object.</span>
<span class="sd">        :param kwargs:          A keyword list passed to self&#39;s toXML method.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">xmlString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toXML</span><span class="p">(</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span>
        <span class="n">fOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="n">xmlString</span> <span class="p">)</span>
        <span class="n">fOut</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Base.saveToFile"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Base.saveToFile">[docs]</a>    <span class="k">def</span> <span class="nf">saveToFile</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the contents of self to the specified path (i.e., fileName).</span>

<span class="sd">        :param fileName:        The path to save the contents of self to.</span>
<span class="sd">        :param kwargs:          A keyword list passed to self&#39;s saveToOpenedFile method.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">dirname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span> <span class="n">fileName</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">dirname</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span> <span class="n">dirname</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span> <span class="n">dirname</span> <span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span> <span class="n">fileName</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span> <span class="p">)</span> <span class="k">as</span> <span class="n">fout</span> <span class="p">:</span>
            <span class="n">fout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saveToOpenedFile</span><span class="p">(</span> <span class="n">fout</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Base.standardXML_attributes"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Base.standardXML_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">standardXML_attributes</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkAncestor</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the XML attribute string for *checksum* and *algorithm*.&quot;&quot;&quot;</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span><span class="p">:</span>
            <span class="n">attrs</span> <span class="o">+=</span> <span class="s1">&#39; checksum=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span>

        <span class="n">algorithm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span>
        <span class="k">if</span> <span class="n">checkAncestor</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span><span class="o">.</span><span class="n">algorithm</span><span class="p">:</span> <span class="n">algorithm</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">algorithm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="n">attrs</span> <span class="o">+=</span> <span class="s1">&#39; algorithm=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">algorithm</span>
            
        <span class="k">return</span> <span class="n">attrs</span></div></div>

<div class="viewcode-block" id="Map"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map">[docs]</a><span class="k">class</span> <span class="nc">Map</span><span class="p">(</span> <span class="n">Base</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents a map file that is used to create a library from a list of protares and other map files.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">moniker</span> <span class="o">=</span> <span class="s2">&quot;map&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">parentsDir</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span> <span class="o">=</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">checksum</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor for Map class.</span>

<span class="sd">        :param library:         The name of the library.</span>
<span class="sd">        :param path:            The path to the map file.</span>
<span class="sd">        :param parentsDir:      May be deprecated, needs more investigating.</span>
<span class="sd">        :param format:          The format version for the map.</span>
<span class="sd">        :param checksum:        Hash for the map (computed from the concatenation of all checksums inside the map)</span>
<span class="sd">        :param algorithm:       Algorithm used to compute checksums.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">Base</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">library</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Library must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__library</span> <span class="o">=</span> <span class="n">library</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">path</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Path must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__path</span> <span class="o">=</span> <span class="n">path</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">parentsDir</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Parent&#39;s path must be a string.&quot;</span> <span class="p">)</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="p">)</span> <span class="p">:</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">parentsDir</span><span class="p">,</span> <span class="n">path</span> <span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fileName</span> <span class="o">=</span> <span class="n">fileName</span>

        <span class="k">if</span><span class="p">(</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">allowed</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s1">&#39;Invalid format &quot;</span><span class="si">%s</span><span class="s1">.&quot;&#39;</span> <span class="o">%</span> <span class="nb">format</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__format</span> <span class="o">=</span> <span class="nb">format</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the (index-1)^th item of self.</span>

<span class="sd">        :param index:       The index of the iter to return.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Iterators over each entry in self. Does not dive into import entries.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span> <span class="k">yield</span> <span class="n">entry</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of entries in self. Does not dive into import entries.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the path this map was read from or may be written to. It may be absolote or relative, depending on how it was initialize.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__path</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">format</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns to format for self.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__format</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">library</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the library name for self.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__library</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fileName</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the file name for the location of self. Unlike path, this will always be the absolute path.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fileName</span> <span class="p">)</span>

<div class="viewcode-block" id="Map.updateAllChecksums"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.updateAllChecksums">[docs]</a>    <span class="k">def</span> <span class="nf">updateAllChecksums</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">checksumsModule</span><span class="o">.</span><span class="n">sha1sum</span><span class="o">.</span><span class="n">algorithm</span><span class="p">,</span> <span class="n">mapDirectory</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calls *updateChecksum* on all entries and then updates self&#39;s *checksum*.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span> <span class="n">entry</span><span class="o">.</span><span class="n">updateChecksum</span><span class="p">(</span><span class="n">algorithm</span><span class="p">,</span> <span class="n">mapDirectory</span><span class="o">=</span><span class="n">mapDirectory</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateChecksum</span><span class="p">(</span><span class="n">algorithm</span><span class="p">)</span></div>

<div class="viewcode-block" id="Map.updateChecksum"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.updateChecksum">[docs]</a>    <span class="k">def</span> <span class="nf">updateChecksum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">checksumsModule</span><span class="o">.</span><span class="n">sha1sum</span><span class="o">.</span><span class="n">algorithm</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute map file checksum: concatenate checksums for all entries into a string and compute the sum</span>
<span class="sd">        of that string.</span>
<span class="sd">        @param algorithm:</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">checker</span> <span class="o">=</span> <span class="n">checksumsModule</span><span class="o">.</span><span class="n">checkers</span><span class="p">[</span><span class="n">algorithm</span><span class="p">]</span>           <span class="c1"># Caleb, I think checker and checkers should be called algorithm and algorithms.</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">entry</span><span class="o">.</span><span class="n">checksum</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">checksum</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span> <span class="o">=</span> <span class="n">checker</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">algorithm</span></div>

<div class="viewcode-block" id="Map.append"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">entry</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Append&#39;s the entry to self.&quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">entry</span><span class="p">,</span> <span class="n">EntryBase</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Invalid entry.&quot;</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">entry</span> <span class="p">)</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">setAncestor</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.iterate"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.iterate">[docs]</a>    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Iterates over all protares and TNSLs in self. Dives into import entries.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">entry</span><span class="p">,</span> <span class="n">Import</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">yield from</span> <span class="n">entry</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">yield</span> <span class="n">entry</span></div>

<div class="viewcode-block" id="Map.find"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the first entry matching projectile, target, library and evaluation. Searches each entry in the order they</span>
<span class="sd">        were appended and dives into imported maps.</span>

<span class="sd">        :return:        Returns the found entry or None is no match was found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">entry</span><span class="p">,</span> <span class="n">Import</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">foundEntry</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">foundEntry</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="n">foundEntry</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">entry</span><span class="o">.</span><span class="n">isMatch</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="n">entry</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="kc">None</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.findAllOf"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.findAllOf">[docs]</a>    <span class="k">def</span> <span class="nf">findAllOf</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all entries matching projectile, target, library and evaluation. Searches all imported maps.</span>

<span class="sd">        :param projectile:      The name of the projectile to match.</span>
<span class="sd">        :param target:          The name of the projectile to match.</span>
<span class="sd">        :param library:         The name of the library to match.</span>
<span class="sd">        :param evaluation:      The name of the evaluation to match.</span>

<span class="sd">        :return:                Returns the list of all matches found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">allFound</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">entry</span><span class="p">,</span> <span class="n">Import</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="n">allFound</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="n">findAllOf</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">entry</span><span class="o">.</span><span class="n">isMatch</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="n">allFound</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">entry</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">allFound</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.toXML_list"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.toXML_list">[docs]</a>    <span class="k">def</span> <span class="nf">toXML_list</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of str instances representing the XML lines of self.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                List of str instances representing the XML lines of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">indent2</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;incrementalIndent&#39;</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span> <span class="p">)</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">allowed</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s1">&#39;Invalid format = &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="nb">format</span> <span class="p">)</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span> <span class="kc">False</span> <span class="p">)</span>

        <span class="n">XML_list</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s</span><span class="s1"> library=&quot;</span><span class="si">%s</span><span class="s1">&quot; format=&quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">library</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">attrs</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__entries</span> <span class="p">:</span> <span class="n">XML_list</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="n">toXML_list</span><span class="p">(</span> <span class="n">indent2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span>
        <span class="n">XML_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span>  <span class="s1">&#39;&lt;/</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">XML_list</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.readXML"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.readXML">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">readXML</span><span class="p">(</span> <span class="n">path</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads in a XML map file.</span>

<span class="sd">        :param path:        Path to a map file.</span>

<span class="sd">        :return:            Map instance containing all entries from the map file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">cElementTree</span>
        <span class="kn">from</span> <span class="nn">LUPY.xmlNode</span> <span class="kn">import</span> <span class="n">xmlNode</span>

        <span class="n">node</span> <span class="o">=</span> <span class="n">cElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span> <span class="n">path</span> <span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">(</span> <span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">xmlNode</span><span class="p">(</span> <span class="n">node</span><span class="p">,</span> <span class="n">xmlNode</span><span class="o">.</span><span class="n">etree</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">Map</span><span class="o">.</span><span class="n">parseXML_node</span><span class="p">(</span> <span class="n">path</span><span class="p">,</span> <span class="n">node</span> <span class="p">)</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Map.parseXML_node"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Map.parseXML_node">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parseXML_node</span><span class="p">(</span> <span class="n">path</span><span class="p">,</span> <span class="n">node</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Map instance from an XML map element.</span>

<span class="sd">        :param node:        XML element to parse.</span>

<span class="sd">        :return:            Map instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">Map</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s1">&#39;Invalid node name &quot;</span><span class="si">%s</span><span class="s1">&quot; for a map file.&#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="p">)</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s2">&quot;Map node does not have &#39;format&#39; attribute.&quot;</span> <span class="p">)</span>

        <span class="n">library</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;library&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">library</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s2">&quot;Map node does not have &#39;library&#39; attribute.&quot;</span> <span class="p">)</span>

        <span class="nb">map</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span> <span class="n">library</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;checksum&#39;</span><span class="p">),</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;algorithm&#39;</span><span class="p">)</span> <span class="p">)</span>

        <span class="n">settings</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;format&#39;</span> <span class="p">:</span> <span class="nb">format</span> <span class="p">}</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">Import</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">:</span>
                <span class="nb">map</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">Import</span><span class="o">.</span><span class="n">parseXML_node</span><span class="p">(</span> <span class="n">settings</span><span class="p">,</span> <span class="n">child</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span><span class="p">(</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">Protare</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">:</span>
                <span class="nb">map</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">Protare</span><span class="o">.</span><span class="n">parseXML_node</span><span class="p">(</span> <span class="n">settings</span><span class="p">,</span> <span class="n">child</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span><span class="p">(</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">TNSL</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">:</span>
                <span class="nb">map</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">TNSL</span><span class="o">.</span><span class="n">parseXML_node</span><span class="p">(</span> <span class="n">settings</span><span class="p">,</span> <span class="n">child</span> <span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s2">&quot;Invalid child tag &#39;</span><span class="si">%s</span><span class="s2">&#39; for map file.&quot;</span> <span class="o">%</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="nb">map</span> <span class="p">)</span></div></div>

<div class="viewcode-block" id="EntryBase"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.EntryBase">[docs]</a><span class="k">class</span> <span class="nc">EntryBase</span><span class="p">(</span> <span class="n">Base</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Base class for all map entry classes.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Base constructor for map entries.</span>

<span class="sd">        :param path:            Path attribute for the entry.</span>
<span class="sd">        :param checksum:        Checksum for this entry, computed using the indicated algorithm.</span>
<span class="sd">        :param algorithm:       Algorithm for computing the checksum. Only required if different from parent &lt;map&gt; file.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">Base</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">path</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Path must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fileName</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the absolute path to the file pointed to by the &#39;path&#39; attribute.&quot;&quot;&quot;</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">filename</span> <span class="o">!=</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="p">)</span> <span class="p">:</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span><span class="o">.</span><span class="n">path</span> <span class="p">)</span> <span class="p">),</span> <span class="n">filename</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="n">filename</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the path of the map file. This may be absolute or relative.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__path</span> <span class="p">)</span>

<div class="viewcode-block" id="EntryBase.buildFileName"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.EntryBase.buildFileName">[docs]</a>    <span class="k">def</span> <span class="nf">buildFileName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapDirectory</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method is designed to aid in building a map file when the map file does not reside in its final resting place.</span>
<span class="sd">        The value of *mapDirectory* should be the final resting place (i.e., directory) of the map file.</span>
<span class="sd">        Otherwise, this method is the same as the propery methods *fileName*.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">mapDirectory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">mapDirectory</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="EntryBase.updateChecksum"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.EntryBase.updateChecksum">[docs]</a>    <span class="k">def</span> <span class="nf">updateChecksum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">checksumsModule</span><span class="o">.</span><span class="n">sha1sum</span><span class="o">.</span><span class="n">algorithm</span><span class="p">,</span> <span class="n">mapDirectory</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the checksum of the file specified by *path* member and store it into the *checksum* member.</span>

<span class="sd">        @param algorithm:       The algorithm to use for the checksum.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">algorithm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checksum</span> <span class="o">=</span> <span class="n">checksumsModule</span><span class="o">.</span><span class="n">checkers</span><span class="p">[</span><span class="n">algorithm</span><span class="p">]</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buildFileName</span><span class="p">(</span><span class="n">mapDirectory</span><span class="p">))</span></div></div>

<div class="viewcode-block" id="Import"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import">[docs]</a><span class="k">class</span> <span class="nc">Import</span><span class="p">(</span> <span class="n">EntryBase</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class representing an &#39;import&#39; entry in a map. An import entry specifies the location of another map file to import.&quot;&quot;&quot;</span>

    <span class="n">moniker</span> <span class="o">=</span> <span class="s2">&quot;import&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor for the import entry.</span>

<span class="sd">        :param path:            Path to the map file in import.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">EntryBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__map</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a simple string representation of self.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> with path &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">map</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a reference to self.__map.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readMap</span><span class="p">(</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span> <span class="p">)</span>

<div class="viewcode-block" id="Import.find"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.find">[docs]</a>    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls find on self.__map and returns its results.</span>

<span class="sd">        :param projectile:      The name of the projectile to match.</span>
<span class="sd">        :param target:          The name of the projectile to match.</span>
<span class="sd">        :param library:         The name of the library to match.</span>
<span class="sd">        :param evaluation:      The name of the evaluation to match.</span>

<span class="sd">        :return:                Returns the found entry or None is no match was found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readMap</span><span class="p">(</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span><span class="o">.</span><span class="n">find</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Import.findAllOf"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.findAllOf">[docs]</a>    <span class="k">def</span> <span class="nf">findAllOf</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all entries matching projectile, target, library and evaluation. Searches all imported maps.</span>

<span class="sd">        :param projectile:      The name of the projectile to match.</span>
<span class="sd">        :param target:          The name of the projectile to match.</span>
<span class="sd">        :param library:         The name of the library to match.</span>
<span class="sd">        :param evaluation:      The name of the evaluation to match.</span>

<span class="sd">        :return:                Returns the list of all matches found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readMap</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span><span class="o">.</span><span class="n">findAllOf</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Import.iterate"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.iterate">[docs]</a>    <span class="k">def</span> <span class="nf">iterate</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Iterates over all protares and TNSLs in self&#39;s map.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">readMap</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Import.readMap"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.readMap">[docs]</a>    <span class="k">def</span> <span class="nf">readMap</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Reads in the map file pointed to by self if not already read in. An import only reads its map file when needed.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__map</span> <span class="o">=</span> <span class="n">Map</span><span class="o">.</span><span class="n">readXML</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__map</span><span class="o">.</span><span class="n">setAncestor</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__map</span></div>
    
<div class="viewcode-block" id="Import.toXML_list"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.toXML_list">[docs]</a>    <span class="k">def</span> <span class="nf">toXML_list</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of str instances representing the XML lines of self.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                List of str instances representing the XML lines of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span> <span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s</span><span class="s1"> path=&quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="si">%s</span><span class="s1">/&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">attrs</span> <span class="p">)</span> <span class="p">]</span></div>

<div class="viewcode-block" id="Import.parseXML_node"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Import.parseXML_node">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parseXML_node</span><span class="p">(</span> <span class="n">settings</span><span class="p">,</span> <span class="n">node</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an Import instance from an XML import element.</span>

<span class="sd">        :param settings:        Information from parent map instances needed to parse the XML element.</span>
<span class="sd">        :param node:            XML element to parse.</span>

<span class="sd">        :return:                Import instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">Import</span><span class="o">.</span><span class="n">moniker</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Invalid node name.&quot;</span> <span class="p">)</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;checksum&#39;</span><span class="p">,</span> <span class="s1">&#39;algorithm&#39;</span><span class="p">)}</span>
        <span class="n">_import</span> <span class="o">=</span> <span class="n">Import</span><span class="p">(</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">_import</span></div></div>

<div class="viewcode-block" id="ProtareBase"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase">[docs]</a><span class="k">class</span> <span class="nc">ProtareBase</span><span class="p">(</span> <span class="n">EntryBase</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Base class for all protare-like entry classes.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">interaction</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construtor for ProtareBase instance.</span>

<span class="sd">        :param projectile:          Name for the projectile.</span>
<span class="sd">        :param target:              Name for the target.</span>
<span class="sd">        :param evaluation:          Name for the protare&#39;s Evaluation.</span>
<span class="sd">        :param path:                Path to the protare file.</span>
<span class="sd">        :param interaction:         Type of interaction for the data in the protare file (see class reactionSuite.Interaction).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">EntryBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">projectile</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Projectile must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__projectile</span> <span class="o">=</span> <span class="n">projectile</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">target</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Target must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__target</span> <span class="o">=</span> <span class="n">target</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">evaluation</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Evaluation must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">interaction</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">reactionSuiteModule</span><span class="o">.</span><span class="n">Interaction</span><span class="o">.</span><span class="n">allowed</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span> <span class="s2">&quot;Invalid interaction &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">interaction</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__interaction</span> <span class="o">=</span> <span class="n">interaction</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__guessedInteraction</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">projectile</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the projectile&#39;s name.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__projectile</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the target&#39;s name.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__target</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">evaluation</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the protare&#39;s evaluation string.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__evaluation</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">interaction</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the protare&#39;s interaction token.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__interaction</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">guessedInteraction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;Returns the guessedInteraction value. This is for pre GNDS 2.0 use only and should not be used with GNDS 2.0 or higher</span>
<span class="sd">        (i.e., it should always be False for GNDS 2.0 or higher.&#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__guessedInteraction</span>

    <span class="nd">@guessedInteraction</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">guessedInteraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&#39;&#39;&#39;Set self&#39;s guessedInteraction member. This is for pre GNDS 2.0 use only and should not be used with GNDS 2.0 or higher.&#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__guessedInteraction</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">library</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the label for the library the protare resides in.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">ancestor</span><span class="o">.</span><span class="n">library</span> <span class="p">)</span>

<div class="viewcode-block" id="ProtareBase.isMatch"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.isMatch">[docs]</a>    <span class="k">def</span> <span class="nf">isMatch</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">evaluation</span> <span class="o">=</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True is self matchs projectile, target, library and evaluation, and False otherwise. If an argument has a value of None, </span>
<span class="sd">        that argument is a match.  For example, isMatch( None, &quot;O16&quot;, None, None ) will match any entry with a target of &quot;O16&quot;.</span>

<span class="sd">        :param projectile:      The requested projectile&#39;s PoPs id to match.</span>
<span class="sd">        :param target:          The requested target&#39;s PoPs id to match.</span>
<span class="sd">        :param library:         The requested library to match.</span>
<span class="sd">        :param evaluation:      The requested evaluation to match.</span>

<span class="sd">        :return:                Returns True if a match and False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptable</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectile</span><span class="p">,</span> <span class="n">projectile</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
            <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptable</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">target</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span>
                <span class="k">if</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptable</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">library</span><span class="p">,</span> <span class="n">library</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">adaptable</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__evaluation</span><span class="p">,</span> <span class="n">evaluation</span> <span class="p">)</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="kc">False</span> <span class="p">)</span></div>

<div class="viewcode-block" id="ProtareBase.protare"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.protare">[docs]</a>    <span class="k">def</span> <span class="nf">protare</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads in the protare using reactionSuiteModule.readXML and returns the instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">reactionSuiteModule</span><span class="o">.</span><span class="n">readXML</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileName</span> <span class="p">)</span> <span class="p">)</span></div>

<div class="viewcode-block" id="ProtareBase.standardXML_attributes"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.standardXML_attributes">[docs]</a>    <span class="k">def</span> <span class="nf">standardXML_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkAncestor</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the XML attribute string for protare, target, evalution and interaction as well that those</span>
<span class="sd">        returned by Base.standardXML_attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">attributeString</span> <span class="o">=</span> <span class="s1">&#39; projectile=&quot;</span><span class="si">%s</span><span class="s1">&quot; target=&quot;</span><span class="si">%s</span><span class="s1">&quot; evaluation=&quot;</span><span class="si">%s</span><span class="s1">&quot; path=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">projectile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">guessedInteraction</span><span class="p">:</span> <span class="n">attributeString</span> <span class="o">+=</span> <span class="s1">&#39; interaction=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction</span>
        <span class="k">return</span> <span class="n">attributeString</span> <span class="o">+</span> <span class="n">Base</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkAncestor</span><span class="o">=</span><span class="n">checkAncestor</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProtareBase.adaptable"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.ProtareBase.adaptable">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">adaptable</span><span class="p">(</span> <span class="n">item1</span><span class="p">,</span> <span class="n">item2</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns True whenever item2 is None or item1 and item2 are the same. For internal use.</span>

<span class="sd">        :param item1:       Item to compare to item2.</span>
<span class="sd">        :param item2:       Item to compare to item1.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">item2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">)</span> <span class="p">:</span> <span class="k">return</span><span class="p">(</span> <span class="kc">True</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">item2</span><span class="p">,</span> <span class="n">item1</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div></div>
    
<div class="viewcode-block" id="Protare"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Protare">[docs]</a><span class="k">class</span> <span class="nc">Protare</span><span class="p">(</span> <span class="n">ProtareBase</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The class for a map&#39;s protare node.&quot;&quot;&quot;</span>

    <span class="n">moniker</span> <span class="o">=</span> <span class="s2">&quot;protare&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">interaction</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construtor for a Protare instance.</span>

<span class="sd">        :param projectile:      Name for the projectile.</span>
<span class="sd">        :param target:          Name for the target.</span>
<span class="sd">        :param evaluation:      Name for the protare&#39;s Evaluation.</span>
<span class="sd">        :param path:            Path to the protare file.</span>
<span class="sd">        :param interaction:     Type of interaction for the data in the protare file (see class reactionSuite.Interaction).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ProtareBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">interaction</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a simple string representation of self.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> with projectile &quot;</span><span class="si">%s</span><span class="s1">&quot;, target &quot;</span><span class="si">%s</span><span class="s1">&quot;, evaluation &quot;</span><span class="si">%s</span><span class="s1">&quot;, path &quot;</span><span class="si">%s</span><span class="s1">&quot; and interaction &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> 
            <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">interaction</span> <span class="p">)</span> <span class="p">)</span>

<div class="viewcode-block" id="Protare.toXML_list"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Protare.toXML_list">[docs]</a>    <span class="k">def</span> <span class="nf">toXML_list</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of str instances representing the XML lines of self.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                List of str instances representing the XML lines of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span> <span class="p">)</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">format</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">allowed</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s1">&#39;Invalid format = &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="nb">format</span> <span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s%s</span><span class="s1">/&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="p">]</span></div>

<div class="viewcode-block" id="Protare.parseXML_node"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.Protare.parseXML_node">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parseXML_node</span><span class="p">(</span> <span class="n">settings</span><span class="p">,</span> <span class="n">node</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Protare instance from an XML protare element.</span>

<span class="sd">        :param settings:    Information from parent map instances needed to parse the XML element.</span>
<span class="sd">        :param node:        XML element to parse.</span>

<span class="sd">        :return:            A map Protare instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">Protare</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Invalid node name.&quot;</span> <span class="p">)</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span>
                  <span class="p">(</span><span class="s1">&#39;projectile&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;evaluation&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;interaction&#39;</span><span class="p">,</span> <span class="s1">&#39;checksum&#39;</span><span class="p">,</span> <span class="s1">&#39;algorithm&#39;</span><span class="p">)}</span>

        <span class="n">guessedInteraction</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;interaction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">guessInteractionModule</span><span class="o">.</span><span class="n">guessInteraction</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;interaction&#39;</span><span class="p">],</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;projectile&#39;</span><span class="p">],</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">])</span>

        <span class="n">protare</span> <span class="o">=</span> <span class="n">Protare</span><span class="p">(</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span>

        <span class="n">protare</span><span class="o">.</span><span class="n">guessedInteraction</span> <span class="o">=</span> <span class="n">guessedInteraction</span>

        <span class="k">return</span> <span class="n">protare</span></div></div>

<div class="viewcode-block" id="TNSL"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.TNSL">[docs]</a><span class="k">class</span> <span class="nc">TNSL</span><span class="p">(</span> <span class="n">ProtareBase</span> <span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;The class for a map&#39;s TNSL node.&quot;&quot;&quot;</span>

    <span class="n">moniker</span> <span class="o">=</span> <span class="s2">&quot;TNSL&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">standardTarget</span><span class="p">,</span> <span class="n">standardEvaluation</span><span class="p">,</span> 
            <span class="n">interaction</span><span class="o">=</span><span class="n">reactionSuiteModule</span><span class="o">.</span><span class="n">Interaction</span><span class="o">.</span><span class="n">TNSL</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construtor for a TNSL instance.</span>

<span class="sd">        :param projectile:              Name for the projectile.</span>
<span class="sd">        :param target:                  Name id for the target.</span>
<span class="sd">        :param evaluation:              Evaluation for the protare.</span>
<span class="sd">        :param path:                    Path to the protare file.</span>
<span class="sd">        :param standardTarget:          Name for the standard target.</span>
<span class="sd">        :param standardEvaluation:      Name for the standard evaluation.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">ProtareBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">projectile</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">evaluation</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">interaction</span><span class="p">,</span> <span class="n">checksum</span><span class="o">=</span><span class="n">checksum</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="n">algorithm</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">standardTarget</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Regular target must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__standardTarget</span> <span class="o">=</span> <span class="n">standardTarget</span>

        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span><span class="p">(</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">standardEvaluation</span><span class="p">,</span> <span class="nb">str</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Regular evaluation must be a string.&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__standardEvaluation</span> <span class="o">=</span> <span class="n">standardEvaluation</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns a simple string representation of self.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> with projectile &quot;</span><span class="si">%s</span><span class="s1">&quot;, target &quot;</span><span class="si">%s</span><span class="s1">&quot;, evaluation &quot;</span><span class="si">%s</span><span class="s1">&quot;, path &quot;</span><span class="si">%s</span><span class="s1">&quot;, standardTarget &quot;</span><span class="si">%s</span><span class="s1">&quot; and standardEvaluation &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> 
            <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">projectile</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardTarget</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardEvaluation</span> <span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">standardTarget</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the standardTarget.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__standardTarget</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">standardEvaluation</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the standardEvaluation.&quot;&quot;&quot;</span>

        <span class="k">return</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">__standardEvaluation</span> <span class="p">)</span>

<div class="viewcode-block" id="TNSL.toXML_list"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.TNSL.toXML_list">[docs]</a>    <span class="k">def</span> <span class="nf">toXML_list</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of str instances representing the XML lines of self.</span>

<span class="sd">        :param indent:          The amount of indentation for each line. Child nodes and text may be indented more.</span>
<span class="sd">        :param kwargs:          A keyword list.</span>

<span class="sd">        :return:                List of str instances representing the XML lines of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">default</span> <span class="p">)</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardXML_attributes</span><span class="p">(</span> <span class="p">)</span>

        <span class="k">if</span><span class="p">(</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">version_0_1</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">indent2</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;incrementalIndent&#39;</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span> <span class="p">)</span>
            <span class="n">XML_list</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="n">attrs</span> <span class="p">)</span> <span class="p">]</span>
            <span class="n">XML_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;protare projectile=&quot;n&quot; target=&quot;</span><span class="si">%s</span><span class="s1">&quot; evaluation=&quot;</span><span class="si">%s</span><span class="s1">&quot;/&gt;&lt;/</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> 
                    <span class="p">(</span> <span class="n">indent2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardTarget</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardEvaluation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">)</span>
        <span class="k">elif</span><span class="p">(</span> <span class="nb">format</span> <span class="ow">in</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">allowed</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">XML_list</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&lt;</span><span class="si">%s%s</span><span class="s1"> standardTarget=&quot;</span><span class="si">%s</span><span class="s1">&quot; standardEvaluation=&quot;</span><span class="si">%s</span><span class="s1">&quot;/&gt;&#39;</span> <span class="o">%</span>
                    <span class="p">(</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">moniker</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardTarget</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">standardEvaluation</span> <span class="p">)</span> <span class="p">]</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s1">&#39;Invalid format = &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="nb">format</span> <span class="p">)</span>

        <span class="k">return</span><span class="p">(</span> <span class="n">XML_list</span> <span class="p">)</span></div>

<div class="viewcode-block" id="TNSL.parseXML_node"><a class="viewcode-back" href="../../fudge/fudge.html#fudge.map.TNSL.parseXML_node">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parseXML_node</span><span class="p">(</span> <span class="n">settings</span><span class="p">,</span> <span class="n">node</span> <span class="p">)</span> <span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a TNSL instance from an XML TNSL element.</span>

<span class="sd">        :param settings:    Information from parent map instances needed to parse the XML element.</span>
<span class="sd">        :param node:        XML element to parse.</span>

<span class="sd">        :return:            TNSL instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span><span class="p">(</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">TNSL</span><span class="o">.</span><span class="n">moniker</span> <span class="p">)</span> <span class="p">:</span> <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Invalid node name.&quot;</span> <span class="p">)</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">attr</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span>
                  <span class="p">(</span><span class="s1">&#39;projectile&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;evaluation&#39;</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;interaction&#39;</span><span class="p">,</span> <span class="s1">&#39;checksum&#39;</span><span class="p">,</span> <span class="s1">&#39;algorithm&#39;</span><span class="p">)}</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;interaction&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;interaction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reactionSuiteModule</span><span class="o">.</span><span class="n">Interaction</span><span class="o">.</span><span class="n">TNSL</span>

        <span class="nb">format</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">format</span> <span class="o">==</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">version_0_1</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;standardTarget&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;standardEvaluation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;evaluation&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="p">)</span>
        <span class="k">elif</span><span class="p">(</span> <span class="nb">format</span> <span class="ow">in</span> <span class="n">FormatVersion</span><span class="o">.</span><span class="n">allowed</span> <span class="p">)</span> <span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;standardTarget&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;standardTarget&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;standardEvaluation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;standardEvaluation&#39;</span><span class="p">,</span> <span class="kc">None</span> <span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s1">&#39;Invalid format = &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span> <span class="o">%</span> <span class="nb">format</span> <span class="p">)</span>

        <span class="k">return</span> <span class="n">TNSL</span><span class="p">(</span> <span class="o">**</span><span class="n">kwargs</span> <span class="p">)</span></div></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/gnd.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Fudge and GNDS 5.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">fudge.map</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012, B.Beck, D. Brown, C. Mattoon, N. Patel, N. Summers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
  </body>
</html>